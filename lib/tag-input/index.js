!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../shared"),require("vue"),require("lodash"),require("../config-provider"),require("../directives"),require("../icon"),require("../loading"),require("../popover"),require("vue-types"));else if("function"==typeof define&&define.amd)define(["../shared","vue","lodash","../config-provider","../directives","../icon","../loading","../popover","vue-types"],t);else{var r="object"==typeof exports?t(require("../shared"),require("vue"),require("lodash"),require("../config-provider"),require("../directives"),require("../icon"),require("../loading"),require("../popover"),require("vue-types")):t(e["../shared"],e.vue,e.lodash,e["../config-provider"],e["../directives"],e["../icon"],e["../loading"],e["../popover"],e["vue-types"]);for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(self,((e,t,r,a,o,n,l,i,s)=>(()=>{"use strict";var u={2717:e=>{e.exports=a},4061:e=>{e.exports=o},6870:e=>{e.exports=n},4870:e=>{e.exports=l},5537:e=>{e.exports=i},4212:t=>{t.exports=e},467:e=>{e.exports=r},748:e=>{e.exports=t},210:e=>{e.exports=s}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={exports:{}};return u[e](r,r.exports,d),r.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return(()=>{d.r(p),d.d(p,{default:()=>P});var e=d(4212);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=d(748),i=d(467),s=d(2717),u=d(4061),c=d(6870),f=d(4870),v=d.n(f),g=d(5537),h=d.n(g),y=12,m=function(e){for(var t=e.length,r=0,a=0;a<t;a++)0!=(65280&e.charCodeAt(a))&&(r+=1),r+=1;return r};const T=(0,l.defineComponent)({name:"ListTagRender",props:{node:e.PropTypes.object,searchKey:e.PropTypes.oneOfType([e.PropTypes.string,e.PropTypes.arrayOf(e.PropTypes.string)]),displayKey:e.PropTypes.string,searchKeyword:e.PropTypes.string,tpl:{type:Function}},render:function(){var e=this,t=function(t){if(e.searchKeyword){var r=new RegExp("(".concat(e.searchKeyword,")"),"i");return t.replace(r,'<strong class="highlight-text">$1</strong>')}return t};if(this.tpl)return this.tpl(this.node,t,l.h,this);var r=this.node[this.displayKey];return(0,l.createVNode)("div",{class:"bk-selector-node"},[(0,l.createVNode)("span",{class:"text",innerHTML:t(r)},[r])])}});var b,w=d(210);!function(e){e.FOCUS="focus",e.SEARCH="search"}(b||(b={}));const x=(0,l.defineComponent)({name:"TagRender",directives:{bkTooltips:u.bkTooltips},props:{node:e.PropTypes.object,displayKey:e.PropTypes.string,tpl:{type:Function},hasTips:{type:Boolean,default:!1},tagOverflowTips:{type:Object,default:function(){return{}}}},setup:function(t){var r=(0,l.ref)(),a=(0,l.ref)(!1),o=(0,l.computed)((function(){return Object.assign({boundary:"window",theme:"light",distance:12,content:t.node[t.displayKey],disabled:t.hasTips||!a.value},t.tagOverflowTips)}));return(0,l.onMounted)((function(){a.value=(0,e.checkOverflow)(r.value)})),{overflowTips:o,tagRef:r}},render:function(){return this.tpl?this.tpl(this.node,l.h,this):(0,l.withDirectives)((0,l.createVNode)("div",{class:"tag",ref:"tagRef"},[(0,l.createVNode)("span",{class:"text"},[this.node[this.displayKey]])]),[[(0,l.resolveDirective)("bk-tooltips"),this.overflowTips]])}}),L=(0,l.defineComponent)({name:"TagInput",directives:{bkTooltips:u.bkTooltips},props:{modelValue:e.PropTypes.arrayOf(e.PropTypes.string).def([]),placeholder:e.PropTypes.string.def(""),list:e.PropTypes.arrayOf(e.PropTypes.object).def([]),disabled:e.PropTypes.bool.def(!1),tooltipKey:e.PropTypes.string.def(""),saveKey:e.PropTypes.string.def("id"),displayKey:e.PropTypes.string.def("name"),hasDeleteIcon:e.PropTypes.bool.def(!1),clearable:e.PropTypes.bool.def(!0),trigger:(0,w.toType)("treeTriggerType",{}).def(b.SEARCH),searchKey:e.PropTypes.oneOfType([e.PropTypes.string,e.PropTypes.arrayOf(e.PropTypes.string)]).def("name"),useGroup:e.PropTypes.bool.def(!1),allowCreate:e.PropTypes.bool.def(!1),maxData:e.PropTypes.number.def(-1),maxResult:e.PropTypes.number.def(10),contentMaxHeight:e.PropTypes.number.def(300),contentWidth:e.PropTypes.number.def(190),separator:e.PropTypes.string.def(""),allowNextFocus:e.PropTypes.bool.def(!0),allowAutoMatch:e.PropTypes.bool.def(!1),showClearOnlyHover:e.PropTypes.bool.def(!1),leftSpace:e.PropTypes.number.def(0),createTagValidator:{type:Function},filterCallback:{type:Function},tagTpl:{type:Function},tpl:{type:Function},pasteFn:{type:Function},withValidate:{type:Boolean,default:!0},popoverProps:{type:Object,default:function(){return{}}},collapseTags:{type:Boolean,default:!1},tagOverflowTips:{type:Object,default:function(){return{}}}},emits:["update:modelValue","change","select","focus","blur","remove","removeAll","input"],setup:function(r,u){var c=u.emit,d=(0,e.useFormItem)(),p=(0,s.useLocale)("tagInput"),f=(0,l.reactive)({isEdit:!1,isHover:!1,focusItemIndex:r.allowCreate?-1:0}),v=(0,l.reactive)(Object.assign({isShow:!1,width:190,offset:{mainAxis:4,crossAxis:0}},r.popoverProps)),g=function(e){var t=(0,l.reactive)({curPage:1,totalSize:0,totalPage:0,pageSize:e,isPageLoading:!1,curPageList:[],renderListPaged:[]});return{pageState:t,initPage:function(){var e,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.curPage=1,t.totalSize=a.length,t.totalPage=Math.ceil(t.totalSize/t.pageSize)||1;var o=[];if(t.pageSize>0)for(var l=0;l<t.totalSize;l+=t.pageSize)o.push(a.slice(l,l+t.pageSize));(e=t.renderListPaged).splice.apply(e,[0,t.renderListPaged.length].concat(o)),(r=t.curPageList).splice.apply(r,[0,t.curPageList.length].concat(n(t.renderListPaged[t.curPage-1]||[])))},pageChange:function(e){var r;t.curPage=e,(r=t.curPageList).splice.apply(r,[t.curPageList.length,0].concat(n(t.renderListPaged[t.curPage-1]||[]))),t.isPageLoading=!1}}}((0,l.toRefs)(r).maxResult),h=g.pageState,T=g.initPage,b=g.pageChange,w=(0,l.ref)(""),x=(0,l.ref)(null),L=(0,l.ref)(null),P=(0,l.ref)(null),I=(0,l.ref)(null),C=(0,l.ref)(null),S=(0,l.ref)(null),K=(0,l.computed)((function(){return!r.disabled&&r.hasDeleteIcon})),k=(0,l.computed)((function(){return 1===r.maxData})),V=(0,l.computed)((function(){return 0===R.selectedTagList.length&&""===w.value&&!f.isEdit})),N=(0,l.computed)((function(){return r.placeholder||p.value.placeholder})),O=(0,l.computed)((function(){return r.clearable&&!r.disabled&&0!==R.selectedTagList.length&&(!r.showClearOnlyHover||f.isHover)})),A=(0,l.computed)((function(){return{"bk-tag-input-trigger":!0,active:f.isEdit,disabled:r.disabled}})),R=(0,l.reactive)({localList:[],tagListCache:[],selectedTagList:[],selectedTagListCache:[]}),j=(0,l.computed)((function(){return R.selectedTagList.map((function(e){return e[r.saveKey]}))})),E=function(e){var t=(0,l.toRefs)(e),r=t.useGroup,a=t.saveKey,o=t.displayKey,n=t.list,i=(0,l.ref)([]),s=(0,l.ref)({});return(0,l.watch)([r,a,o,n],(function(){i.value=[];var e=(0,l.markRaw)(n.value);r.value&&(e=e.reduce((function(e,t){var r=[];return t.children&&(r=t.children.map((function(e){return Object.assign({group:{groupId:t[a.value],groupName:t[o.value]}},e)}))),e.concat(r)}),[])),i.value=e,s.value=e.reduce((function(e,t){return e[t[a.value]]=t,e}),{})}),{immediate:!0,deep:!0}),{flatList:i,saveKeyMap:s}}(r),D=E.flatList,q=E.saveKeyMap,M=(0,l.computed)((function(){if(r.useGroup){var e={};return h.curPageList.forEach((function(t,r){t.__index__=r,e[t.group.groupId]||(e[t.group.groupId]={id:t.group.groupId,name:t.group.groupName,children:[]}),e[t.group.groupId].children.push(t)})),Object.keys(e).map((function(t){return e[t]}))}return h.curPageList}));(0,l.watch)([function(){return D.value}],(function(){(0,l.nextTick)((function(){B()}))}),{deep:!0}),(0,l.watch)((function(){return r.modelValue}),(function(e){var t,a,o;o=e,(a=j.value).length===o.length&&o.every((function(e,t){return a[t]===e}))||((0,l.nextTick)((function(){B()})),r.withValidate&&(null===(t=null==d?void 0:d.validate)||void 0===t||t.call(d,"change")))})),(0,l.watch)(w,(0,i.debounce)((function(){var e=0!==h.curPageList.length,t=w.value;""!==t&&e||""===t&&"focus"===r.trigger&&e?v.isShow=!0:"focus"===r.trigger&&e||(v.isShow=!1)}),150)),(0,l.watch)((function(){return v.isShow}),(function(e){F(),e&&C.value&&((0,l.nextTick)((function(){C.value.scrollTop=0})),C.value.removeEventListener("scroll",H),C.value.addEventListener("scroll",H))})),(0,l.onMounted)((function(){B()}));var F=function(){var e;v.offset.crossAxis=k.value?0:null===(e=I.value)||void 0===e?void 0:e.offsetLeft},H=function(){if(!h.isPageLoading&&0!==C.value.scrollTop){var e=C.value;if(e.scrollTop+e.offsetHeight>=e.scrollHeight){var t=h.curPage+1;t<=h.totalPage&&(h.isPageLoading=!0,setTimeout((function(){b(t)}),500))}}},_=function(){var e;return Array.from((null===(e=P.value)||void 0===e?void 0:e.childNodes)||[]).filter((function(e){return![Node.TEXT_NODE,Node.COMMENT_NODE].includes(e.nodeType)}))},z=function(e){if(!r.disabled){if(null==e?void 0:e.target){var t=e.target.className;(t.indexOf("bk-tag-input-trigger")>-1||t.indexOf("tag-list")>-1)&&P.value.appendChild(I.value)}clearTimeout(S.value),k.value&&j.value.length&&(R.tagListCache=n(j.value),R.selectedTagListCache=n(R.selectedTagList),w.value=R.selectedTagListCache[0][r.saveKey],te(R.selectedTagList[0],0),Z()),f.isEdit=!0,(0,l.nextTick)((function(){var e;null===(e=x.value)||void 0===e||e.focus(),"focus"===r.trigger&&0!==R.localList.length&&(G(),v.isShow?F():v.isShow=!0)}))}},B=function(){var e=r.saveKey,t=r.modelValue,a=r.displayKey,n=r.allowCreate,l=r.trigger;if(R.selectedTagList=[],R.localList=D.value,t.length){var i={};R.selectedTagList=t.map((function(t){var r,l=q.value[t];return i[t]=1,!l&&n?(o(r={},e,t),o(r,a,t),r):l})).filter((function(e){return e})),k.value||(R.localList=R.localList.filter((function(t){return!i[t[e]]})))}"focus"===l&&G()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.searchKey,a=r.filterCallback,o=e.toLowerCase().trim();if(""!==o){var n=[];n="function"==typeof a?a(o,t,R.localList)||[]:Array.isArray(t)?R.localList.filter((function(e){return t.some((function(t){return e[t].toLowerCase().indexOf(o)>-1}))})):R.localList.filter((function(e){return e[t].toLowerCase().indexOf(o)>-1})),T(n)}else T(R.localList)},U=function(){w.value=""},W=function(){if(k.value)return 0;var e=_().findIndex((function(e){return"tagInputItem"===e.id}));return e>=0?e:0},$=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&e){var a=t;r&&(a=t.nextElementSibling||null),t.parentNode.insertBefore(e,a)}},Z=function(e){var t=r.maxData,a=r.trigger,o=r.allowCreate;if(-1===t||t>j.value.length){var n=((null==e?void 0:e.target)?e.target:w).value,l=m(n);l?(G(n),x.value.style.width="".concat(l*y,"px")):"focus"===a&&G()}else X(),w.value="",v.isShow=!1;f.isEdit=!0,f.focusItemIndex=o?-1:0,c("input",w.value)},X=function(){S.value=setTimeout((function(){var e,t,o,n=w.value;if(U(),f.isEdit=!1,k.value){var l=(t=R.tagListCache,o=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw o}}return n}}(t,o)||a(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];n&&n===l&&R.selectedTagListCache.length?ee(R.selectedTagListCache[0],"select"):Q("remove")}else if(r.allowAutoMatch&&n){var i=h.curPageList.find((function(e){return Array.isArray(r.searchKey)?r.searchKey.map((function(t){return e[t]})).includes(n):e[r.searchKey]===n}));i?J(i,"select"):r.allowCreate&&J(n,"custom")}v.isShow=!1,c("blur",n,j.value),null===(e=null==d?void 0:d.validate)||void 0===e||e.call(d,"blur")}),200)},J=function(e,t,r){null==r||r.stopPropagation(),e&&!e.disabled&&(k.value&&(R.tagListCache=[],R.selectedTagListCache=[],R.selectedTagList=[]),ee(e,t),Q("select"),U(),v.isShow=!1)},Q=function(e,t){c(e,t),c("update:modelValue",j.value),c("change",j.value)},Y=function(){var e=C.value.clientHeight,t=C.value.getBoundingClientRect().y;(0,l.nextTick)((function(){var r=C.value.querySelector(".bk-selector-actived");if(r){var a=r.clientHeight,o=r.getBoundingClientRect().y;o<t&&(C.value.scrollTop=C.value.scrollTop-(t-o));var n=o+a-t;n>e&&(C.value.scrollTop=C.value.scrollTop+n-e)}}))},ee=function(e,a){if(!(R.selectedTagList.length>=r.maxData&&-1!==r.maxData)){var i,s=r.separator,u=r.saveKey,c=r.displayKey,d=r.createTagValidator,p=W(),f=1,v=!1,g=function(e){return"function"!=typeof d||d(e)};if("custom"===a)if(s){var h,m=e.split(s),T=(m=m.filter((function(e){return(null==e?void 0:e.trim())&&!j.value.includes(e)&&g(e)}))).map((function(e){var t;return q.value[e]||(o(t={},u,e),o(t,c,e),t)}));m.length&&((h=R.selectedTagList).splice.apply(h,[p,0].concat(n(T))),f=T.length,v=!0)}else{var b="object"===t(e);if(void 0!==(i=(i=b?e[u]:e.trim()).replace(/\s+/g,""))&&!j.value.includes(i)&&g(i)){var w,L=q.value[i]||(b?e:(o(w={},u,i),o(w,c,i),w));R.selectedTagList.splice(p,0,L),v=!0}}else e&&(void 0===(i=e[u])||j.value.includes(i)||(R.selectedTagList.splice(p,0,e),v=!0));v&&(0,l.nextTick)((function(){for(var e=1;e<=f;e++){var t=_()[p+e];$(t,I.value)}if(x.value.style.width="".concat(y,"px"),!k.value){r.allowNextFocus&&z();var a=j.value.reduce((function(e,t){return e[t]=1,e}),{});R.localList=R.localList.filter((function(e){return!a[e[u]]}))}}))}},te=function(e,t){R.selectedTagList.splice(t,1);var a=q.value[e[r.saveKey]];(r.allowCreate&&a||!r.allowCreate)&&!k.value&&R.localList.push(e)},re=(0,l.computed)((function(){return r.collapseTags?r.collapseTags&&!f.isEdit:r.collapseTags})),ae=function(e,t,r){(0,l.watch)([r,t],(function(){o()}),{flush:"post"});var a=(0,l.ref)(null),o=function(){t.value&&(a.value=null,setTimeout((function(){var t=Array.from(e.value.querySelectorAll(".tag-item")),r=t.findIndex((function(e,r){return!!r&&t[r-1].offsetTop!==e.offsetTop}));a.value=r>0?r-1:null})))};return{overflowTagIndex:a}}(L,re,j),oe=ae.overflowTagIndex;return Object.assign(Object.assign(Object.assign(Object.assign({popoverProps:v},(0,l.toRefs)(f)),(0,l.toRefs)(R)),(0,l.toRefs)(h)),{isShowPlaceholder:V,isShowClear:O,placeholderText:N,curInputValue:w,renderList:M,showTagClose:K,tagInputRef:x,bkTagSelectorRef:L,tagListRef:P,tagInputItemRef:I,selectorListRef:C,triggerClass:A,overflowTagIndex:oe,localCollapseTags:re,focusInputTrigger:z,activeClass:function(e,t){var a={"bk-selector-actived":!1,"bk-selector-selected":j.value.includes(e[r.saveKey])};return r.useGroup?a["bk-selector-actived"]=e.__index__===f.focusItemIndex:a["bk-selector-actived"]=t===f.focusItemIndex,a},handleInput:Z,handleFocus:function(){var e;v.width=k.value?null===(e=L.value)||void 0===e?void 0:e.clientWidth:r.contentWidth,c("focus")},handleBlur:X,handleTagSelected:J,handleTagRemove:function(e,t,r){null==r||r.stopPropagation(),te(e,t),U(),Q("remove",e),x.value.style.width="".concat(y,"px")},handleClear:function(e){e.stopPropagation();var t=R.selectedTagList;R.selectedTagList=[];var a,o=t.filter((function(e){return q.value[e[r.saveKey]]}));(!r.allowCreate||0===o.length)&&r.allowCreate||k.value||(a=R.localList).push.apply(a,n(o)),Q("removeAll")},tagFocus:function(e){r.disabled||($(I.value,e.currentTarget,!0),x.value.style.width="".concat(y,"px"),v.isShow&&F())},handleKeydown:function(e){if(!h.isPageLoading){var t=e.target.value,a=m(t),o=W(),n=_();switch(e.code){case"ArrowUp":if(e.preventDefault(),!v.isShow)return;f.focusItemIndex=f.focusItemIndex-1,f.focusItemIndex=f.focusItemIndex<0?-1:f.focusItemIndex,-1===f.focusItemIndex&&(f.focusItemIndex=h.curPageList.length-1),Y();break;case"ArrowDown":if(e.preventDefault(),!v.isShow)return;f.focusItemIndex=f.focusItemIndex+1,f.focusItemIndex=f.focusItemIndex>h.curPageList.length-1?h.curPageList.length:f.focusItemIndex,f.focusItemIndex===h.curPageList.length&&(f.focusItemIndex=0),Y();break;case"ArrowLeft":if(f.isEdit=!0,!a){if(o<1)return;$(I.value,n[o-1]),z()}break;case"ArrowRight":if(f.isEdit=!0,!a){if(o===n.length-1)return;$(n[o+1],I.value),z()}break;case"Enter":case"NumpadEnter":!r.allowCreate&&v.isShow||r.allowCreate&&f.focusItemIndex>=0&&v.isShow?J(h.curPageList[f.focusItemIndex],"select",e):r.allowCreate&&w.value.trim()&&J(w.value,"custom",e),e.preventDefault();break;case"Backspace":0===o||w.value||function(e,t){var a=_();$(I.value,a[e-1]),R.selectedTagList.splice(e-1,1),z();var o=q.value[t[r.saveKey]];(r.allowCreate&&o||!r.allowCreate)&&!k.value&&R.localList.push(t),x.value="".concat(y,"px"),Q("remove")}(o,R.selectedTagList[o-1])}}},handlePaste:function(e){if(e.preventDefault(),k.value)return!1;var t=r.maxData,a=r.saveKey,l=r.displayKey,i=r.pasteFn,s=r.allowCreate,u=e.clipboardData.getData("text"),c=i?i(u):function(e){var t=[],a=e.split(";"),n=/^[a-zA-Z][a-zA-Z_]*/g;return a.forEach((function(e){var a=e.match(n);if(a){var l,i=a.join("");t.push((o(l={},r.saveKey,i),o(l,r.displayKey,i),l))}})),t}(u),d=c.map((function(e){return e[a]}));if(d.length){var p=_(),f=W(),v=R.localList.map((function(e){return e[a]}));if(d=d.filter((function(e){var t=(null==e?void 0:e.trim())&&!j.value.includes(e);return s?t:t&&v.includes(e)})),-1!==t){var g=R.selectedTagList.length;if(g<t){var h=t-g;d.length>h&&(d=n(d.slice(0,h)))}else d=[]}var m,T=s?d.map((function(e){var t,r=R.localList.find((function(t){return t[a]===e}));return null!=r?r:(o(t={},a,e),o(t,l,e),t)})):R.localList.filter((function(e){return d.includes(e[a])}));d.length&&((m=R.selectedTagList).splice.apply(m,[f,0].concat(n(T))),$(I.value,p[f]),x.value.style.width="".concat(y,"px"),R.localList=R.localList.filter((function(e){return!d.includes(e[a])})),Q("select"),z())}}})},render:function(){var e=this;return(0,l.createVNode)("div",{class:"bk-tag-input",ref:"bkTagSelectorRef",onClick:this.focusInputTrigger,onMouseenter:function(){return e.isHover=!0},onMouseleave:function(){return e.isHover=!1}},[(0,l.createVNode)(h(),(0,l.mergeProps)({theme:"light bk-tag-input-popover-content",trigger:"manual",placement:"bottom-start",arrow:!1},this.popoverProps),{default:function(){var t,r,a;return(0,l.createVNode)("div",{class:e.triggerClass},[(0,l.createVNode)("ul",{class:"tag-list",ref:"tagListRef",style:{marginLeft:"".concat(e.leftSpace,"px")}},[e.selectedTagList.map((function(t,r){var a={boundary:"window",theme:"light",distance:12,content:t[e.tooltipKey],disabled:!e.tooltipKey},o=e.localCollapseTags&&e.overflowTagIndex&&r>=e.overflowTagIndex;return(0,l.withDirectives)((0,l.createVNode)("li",{class:"tag-item",style:{display:o?"none":""},onClick:e.tagFocus},[(0,l.createVNode)(x,{node:t,tpl:e.tagTpl,displayKey:e.displayKey,hasTips:!!e.tooltipKey,tagOverflowTips:e.tagOverflowTips},null),e.showTagClose?(0,l.createVNode)(c.Error,{class:"remove-tag",onClick:e.handleTagRemove.bind(e,t,r)},null):null]),[[(0,l.resolveDirective)("bk-tooltips"),a]])})),(0,l.withDirectives)((0,l.createVNode)("li",{ref:"tagInputItemRef",id:"tagInputItem",class:"tag-input-item",role:"input"},[(0,l.withDirectives)((0,l.createVNode)("input",{type:"text",class:"tag-input",ref:"tagInputRef","onUpdate:modelValue":function(t){return e.curInputValue=t},onInput:e.handleInput,onFocus:e.handleFocus,onBlur:e.handleBlur,onKeydown:e.handleKeydown,onPaste:e.handlePaste},null),[[l.vModelText,e.curInputValue]])]),[[l.vShow,e.isEdit]]),!!e.overflowTagIndex&&e.localCollapseTags&&(0,l.createVNode)("li",{class:"tag-item"},[(0,l.createVNode)("div",{class:"tag"},[(0,l.createVNode)("span",{class:"text"},[(0,l.createTextVNode)("+"),e.selectedTagList.length-e.overflowTagIndex])])])]),(0,l.withDirectives)((0,l.createVNode)("p",{class:"placeholder"},[e.placeholderText]),[[l.vShow,e.isShowPlaceholder]]),null!==(a=null===(r=null===(t=e.$slots)||void 0===t?void 0:t.suffix)||void 0===r?void 0:r.call(t))&&void 0!==a?a:e.isShowClear&&(0,l.createVNode)(c.Close,{class:"clear-icon",onClick:e.handleClear},null)])},content:function(){return(0,l.createVNode)("div",{class:"bk-selector-list"},[(0,l.createVNode)("ul",{ref:"selectorListRef",style:{"max-height":"".concat(e.contentMaxHeight,"px")},class:"outside-ul"},[e.renderList.map((function(t,r){return e.useGroup?(0,l.createVNode)("li",{class:"bk-selector-group-item"},[(0,l.createVNode)("span",{class:"group-name"},[t.name,(0,l.createTextVNode)(" ("),t.children.length,(0,l.createTextVNode)(")")]),(0,l.createVNode)("ul",{class:"bk-selector-group-list-item"},[t.children.map((function(t,r){return(0,l.createVNode)("li",{class:["bk-selector-list-item",{disabled:t.disabled},e.activeClass(t,r)],onClick:e.handleTagSelected.bind(e,t,"select")},[(0,l.createVNode)(T,{node:t,displayKey:e.displayKey,tpl:e.tpl,searchKey:e.searchKey,searchKeyword:e.curInputValue},null)])}))])]):(0,l.createVNode)("li",{class:["bk-selector-list-item",{disabled:t.disabled},e.activeClass(t,r)],onClick:e.handleTagSelected.bind(e,t,"select")},[(0,l.createVNode)(T,{node:t,displayKey:e.displayKey,tpl:e.tpl,searchKey:e.searchKey,searchKeyword:e.curInputValue},null)])})),e.isPageLoading?(0,l.createVNode)("li",{class:"bk-selector-list-item loading"},[(0,l.createVNode)(v(),{theme:"primary",size:f.BkLoadingSize.Small},null)]):null])])}})])}}),P=(0,e.withInstall)(L)})(),p})()));
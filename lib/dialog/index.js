!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o(require("../shared"),require("vue"),require("../button"),require("../config-provider"),require("../icon"),require("../modal"));else if("function"==typeof define&&define.amd)define(["../shared","vue","../button","../config-provider","../icon","../modal"],o);else{var t="object"==typeof exports?o(require("../shared"),require("vue"),require("../button"),require("../config-provider"),require("../icon"),require("../modal")):o(e["../shared"],e.vue,e["../button"],e["../config-provider"],e["../icon"],e["../modal"]);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(self,((e,o,t,n,r,l)=>(()=>{"use strict";var i={4976:e=>{e.exports=t},2717:e=>{e.exports=n},6870:e=>{e.exports=r},8014:e=>{e.exports=l},4212:o=>{o.exports=e},748:e=>{e.exports=o}},a={};function s(e){var o=a[e];if(void 0!==o)return o.exports;var t=a[e]={exports:{}};return i[e](t,t.exports,s),t.exports}s.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return s.d(o,{a:o}),o},s.d=(e,o)=>{for(var t in o)s.o(o,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},s.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{s.r(c),s.d(c,{default:()=>f});var e=s(4212),o=s(748),t=s(4976),n=s.n(t),r=s(2717),l=s(6870),i=s(8014),a=s.n(i);const d=Object.assign(Object.assign({},i.propsMixin),{width:e.PropTypes.oneOfType([String,Number]).def(""),height:e.PropTypes.oneOfType([String,Number]).def(""),confirmText:e.PropTypes.string,cancelText:e.PropTypes.string,prevText:e.PropTypes.string,nextText:e.PropTypes.string,current:e.PropTypes.number.def(1),totalStep:e.PropTypes.number,title:e.PropTypes.string.def("title"),headerAlign:(0,e.alignType)().def(e.AlignEnum.LEFT),footerAlign:(0,e.alignType)().def(e.AlignEnum.RIGHT),theme:e.PropTypes.theme().def(e.ThemeEnum.PRIMARY),dialogType:(0,e.dialogTypeUnion)(),isLoading:e.PropTypes.bool.def(!1)}),u=(0,o.defineComponent)({name:"Dialog",components:{BkModal:a(),BkButton:n()},props:d,emits:["closed","update:isShow","confirm","prev","next","value-change"],setup:function(e,t){var n=t.emit,l=(0,r.useLocale)("dialog"),i=(0,o.computed)((function(){return void 0===e.confirmText?l.value.ok:e.confirmText})),a=(0,o.computed)((function(){return void 0===e.cancelText?l.value.cancel:e.cancelText})),s=(0,o.computed)((function(){return void 0===e.prevText?l.value.prev:e.prevText})),c=(0,o.computed)((function(){return void 0===e.nextText?l.value.next:e.nextText})),d=(0,o.reactive)({positionX:0,positionY:0,moveStyle:{top:"",left:""}}),u=(0,o.ref)(e.isShow);(0,o.onMounted)((function(){e.escClose&&addEventListener("keydown",v)})),(0,o.onBeforeUnmount)((function(){e.escClose&&removeEventListener("keydown",v)})),(0,o.watch)((function(){return e.isShow}),(function(e){e?u.value=!0:setTimeout((function(){d.moveStyle={top:"50%",left:"50%"},d.positionX=0,d.positionY=0,u.value=!1}),250),n("value-change",e)}));var f=function(){n("update:isShow",!1),n("closed"),u.value=!1},p=(0,o.computed)((function(){return["process","operation","confirm"].includes(e.dialogType)})),v=function(o){e.isShow&&e.closeIcon&&27===o.keyCode&&f()};return{data:d,handleClose:f,handleConfirm:function(){n("update:isShow",!1),n("confirm")},escCloseHandler:v,moveHandler:function(o){if(e.fullscreen)return!1;if(!e.draggable)return!1;var t,n,r=o.target,l=o.currentTarget.parentNode.parentNode.offsetHeight,i=o.currentTarget.parentNode.parentNode.offsetWidth;0!==d.positionX&&0!==d.positionY?(t=o.clientX-d.positionX,n=o.clientY-d.positionY):(t=o.clientX-r.offsetLeft,n=o.clientY-r.offsetTop),document.onmousemove=function(e){var o=window.innerWidth-i,r=window.innerHeight-l,a=e.clientX-t,s=e.clientY-n;o/2-a<=0?a=o/2:o/2+a<=0&&(a=-o/2),r/2-s<=0?s=r/2:r/2+s<=0&&(s=-r/2),d.positionX=a,d.positionY=s,d.moveStyle.left="calc(50% + ".concat(a,"px)"),d.moveStyle.top="calc(50% + ".concat(s,"px)")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},handlePrevStep:function(){n("prev")},handleNextStep:function(){n("next")},hasFooter:p,isModalShow:u,localConfirmText:i,localCancelText:a,localPrevText:s,localNextText:c}},render:function(){var t,r=this,i={header:function(){var t,n,i,a,s,c;return[(0,o.createVNode)("div",{class:[(0,e.resolveClassName)("dialog-tool"),r.fullscreen||!r.draggable?"":"move",r.draggable?"content-dragging":""],onMousedown:r.moveHandler},[null!==(i=null===(n=(t=r.$slots).tools)||void 0===n?void 0:n.call(t))&&void 0!==i?i:""]),(0,o.createVNode)("div",{class:(0,e.resolveClassName)("dialog-header")},[(0,o.createVNode)("div",{class:(0,e.resolveClassName)("header-icon")},[r.infoType?{loading:(0,o.createVNode)(l.Spinner,{class:[(0,e.resolveClassName)("info-icon"),"primary"]},null),warning:(0,o.createVNode)(l.Warn,{class:[(0,e.resolveClassName)("info-icon"),"warning"]},null),success:(0,o.createVNode)(l.Success,{class:[(0,e.resolveClassName)("info-icon"),"success"]},null),danger:(0,o.createVNode)(l.Close,{class:[(0,e.resolveClassName)("info-icon"),"danger"]},null)}[r.infoType]:(0,o.createVNode)("slot",{name:"info-icon"},null)]),(0,o.createVNode)("span",{class:(0,e.resolveClassName)("dialog-title"),style:"text-align: ".concat(r.headerAlign)},[null!==(c=null===(s=(a=r.$slots).header)||void 0===s?void 0:s.call(a))&&void 0!==c?c:r.title])])]},default:function(){var e,o,t;return null!==(t=null===(o=(e=r.$slots).default)||void 0===o?void 0:o.call(e))&&void 0!==t?t:"default"},footer:function(){var t,l,i,a,s,c,d,u,f;return(0,o.createVNode)("div",{class:(0,e.resolveClassName)("dialog-footer"),style:"text-align: ".concat(r.footerAlign)},["process"===r.dialogType?null!==(i=null===(l=(t=r.$slots).footer)||void 0===l?void 0:l.call(t))&&void 0!==i?i:(0,o.createVNode)(o.Fragment,null,[1===r.current?"":(0,o.createVNode)(n(),{class:(0,e.resolveClassName)("dialog-perv"),onClick:r.handlePrevStep},{default:function(){return[r.localPrevText]}}),r.current===r.totalStep?"":(0,o.createVNode)(n(),{class:(0,e.resolveClassName)("dialog-next"),onClick:r.handleNextStep},{default:function(){return[r.localNextText]}}),r.current===r.totalStep?(0,o.createVNode)(n(),{onClick:r.handleConfirm,theme:r.theme,loading:r.isLoading},{default:function(){return[r.localConfirmText]}}):"",(0,o.createVNode)(n(),{class:(0,e.resolveClassName)("dialog-cancel"),onClick:r.handleClose,disabled:r.isLoading},{default:function(){return[r.localCancelText]}})]):"","operation"===r.dialogType?null!==(c=null===(s=(a=r.$slots).footer)||void 0===s?void 0:s.call(a))&&void 0!==c?c:(0,o.createVNode)(o.Fragment,null,[(0,o.createVNode)(n(),{onClick:r.handleConfirm,theme:r.theme,loading:r.isLoading},{default:function(){return[r.localConfirmText]}}),(0,o.createVNode)(n(),{class:(0,e.resolveClassName)("dialog-cancel"),onClick:r.handleClose,disabled:r.isLoading},{default:function(){return[r.localCancelText]}})]):"","confirm"===r.dialogType?null!==(f=null===(u=(d=r.$slots).footer)||void 0===u?void 0:u.call(d))&&void 0!==f?f:(0,o.createVNode)(o.Fragment,null,[(0,o.createVNode)(n(),{onClick:r.handleConfirm,theme:r.theme,loading:r.isLoading},{default:function(){return[r.localConfirmText]}})]):""])},close:function(){return(0,o.createVNode)(l.Error,{onClick:r.handleClose},null)}},s="".concat((0,e.resolveClassName)("dialog-wrapper ")," ").concat(this.scrollable?"scroll-able":""," ").concat(this.multiInstance?"multi-instance":""," ").concat(this.hasFooter?"has-footer":"no-footer");return(0,o.createVNode)(a(),(0,o.mergeProps)(this.$props,{class:s,onClose:this.handleClose,isShow:this.isModalShow,style:this.data.moveStyle}),"function"==typeof(t=i)||"[object Object]"===Object.prototype.toString.call(t)&&!(0,o.isVNode)(t)?i:{default:function(){return[i]}})}}),f=(0,e.withInstall)(u)})(),c})()));
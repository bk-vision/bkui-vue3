!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../shared"),require("vue"),require("vue-types"),require("../config-provider"),require("../virtual-render"),require("../loading"),require("../checkbox"),require("../icon"),require("../pagination"),require("../directives"),require("lodash"),require("../exception"),require("../popover"),require("../icon/"),require("../button"));else if("function"==typeof define&&define.amd)define(["../shared","vue","vue-types","../config-provider","../virtual-render","../loading","../checkbox","../icon","../pagination","../directives","lodash","../exception","../popover","../icon/","../button"],t);else{var n="object"==typeof exports?t(require("../shared"),require("vue"),require("vue-types"),require("../config-provider"),require("../virtual-render"),require("../loading"),require("../checkbox"),require("../icon"),require("../pagination"),require("../directives"),require("lodash"),require("../exception"),require("../popover"),require("../icon/"),require("../button")):t(e["../shared"],e.vue,e["vue-types"],e["../config-provider"],e["../virtual-render"],e["../loading"],e["../checkbox"],e["../icon"],e["../pagination"],e["../directives"],e.lodash,e["../exception"],e["../popover"],e["../icon/"],e["../button"]);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,((e,t,n,o,r,i,l,a,s,u,c,d,f,p,v)=>(()=>{var h={8022:(e,t,n)=>{var o=n(4481),r=n(6426),i=r;i.v1=o,i.v4=r,e.exports=i},8725:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var o=n||0,r=t;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}},9157:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},4481:(e,t,n)=>{var o,r,i=n(9157),l=n(8725),a=0,s=0;e.exports=function(e,t,n){var u=t&&n||0,c=t||[],d=(e=e||{}).node||o,f=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==f){var p=i();null==d&&(d=o=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=r=16383&(p[6]<<8|p[7]))}var v=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:s+1,y=v-a+(h-s)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||v>a)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=v,s=h,r=f;var g=(1e4*(268435455&(v+=122192928e5))+h)%4294967296;c[u++]=g>>>24&255,c[u++]=g>>>16&255,c[u++]=g>>>8&255,c[u++]=255&g;var m=v/4294967296*1e4&268435455;c[u++]=m>>>8&255,c[u++]=255&m,c[u++]=m>>>24&15|16,c[u++]=m>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var b=0;b<6;++b)c[u+b]=d[b];return t||l(c)}},6426:(e,t,n)=>{var o=n(9157),r=n(8725);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||o)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t)for(var a=0;a<16;++a)t[i+a]=l[a];return t||r(l)}},4976:e=>{"use strict";e.exports=v},5800:e=>{"use strict";e.exports=l},2717:e=>{"use strict";e.exports=o},4061:e=>{"use strict";e.exports=u},9911:e=>{"use strict";e.exports=d},6870:e=>{"use strict";e.exports=a},7685:e=>{"use strict";e.exports=p},4870:e=>{"use strict";e.exports=i},5801:e=>{"use strict";e.exports=s},5537:e=>{"use strict";e.exports=f},4212:t=>{"use strict";t.exports=e},3511:e=>{"use strict";e.exports=r},467:e=>{"use strict";e.exports=c},748:e=>{"use strict";e.exports=t},210:e=>{"use strict";e.exports=n}},y={};function g(e){var t=y[e];if(void 0!==t)return t.exports;var n=y[e]={exports:{}};return h[e](n,n.exports,g),n.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var n in t)g.o(t,n)&&!g.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};return(()=>{"use strict";g.r(m),g.d(m,{BkColumn:()=>Lt,default:()=>St});var e,t,n,o,r=g(4212),i=g(748);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.NONE="none",e.ROW="row",e.COL="col",e.OUTER="outer",e.HORIZONTAL="horizontal"}(n||(n={})),function(e){e.HIGHLIGHT="highlight",e.AUTO="auto"}(o||(o={}));var a,s,u=[o.AUTO,o.HIGHLIGHT],c=[n.NONE,n.ROW,n.COL,n.OUTER,n.HORIZONTAL];!function(e){e.ON_SORT_BY_CLICK="onSortByClick",e.ON_FILTER_CLICK="onFilterClick",e.ON_SETTING_CHANGE="onSettingChange",e.ON_ROW_EXPAND_CLICK="onRowExpandClick",e.ON_ROW_CHECK="onRowCheck"}(a||(a={})),function(e){e.COLUMN_PICK="columnPick",e.COLUMN_SORT="columnSort",e.COLUMN_FILTER="columnFilter",e.COLUMN_FILTER_SAVE="colFilterSave",e.ROW_CLICK="rowClick",e.ROW_DBL_CLICK="rowDblclick",e.ROW_EXPAND_CLICK="rowExpand",e.PAGE_LIMIT_CHANGE="pageLimitChange",e.PAGE_VALUE_CHANGE="pageValueChange",e.SETTING_CHANGE="settingChange",e.SCROLL_BOTTOM="scrollBottom",e.ROW_SELECT="select",e.ROW_SELECT_ALL="selectAll",e.ROW_SELECT_CHANGE="selectionChange",e.CELL_CLICK="cellClick",e.CELL_DBL_CLICK="cellDblclick",e.NATIVE_CLICK="click",e.NATIVE_DBL_CLICK="dblclick"}(s||(s={}));var d,f=function(){return!0},p=(l(e={},s.COLUMN_PICK,f),l(e,s.COLUMN_FILTER,f),l(e,s.COLUMN_SORT,f),l(e,s.COLUMN_FILTER_SAVE,f),l(e,s.ROW_CLICK,f),l(e,s.ROW_DBL_CLICK,f),l(e,s.ROW_EXPAND_CLICK,f),l(e,s.ROW_SELECT,f),l(e,s.ROW_SELECT_ALL,f),l(e,s.ROW_SELECT_CHANGE,f),l(e,s.PAGE_LIMIT_CHANGE,f),l(e,s.PAGE_VALUE_CHANGE,f),l(e,s.SETTING_CHANGE,f),l(e,s.SCROLL_BOTTOM,f),l(e,s.CELL_CLICK,f),l(e,s.CELL_DBL_CLICK,f),e),v=(l(t={},s.NATIVE_CLICK,f),l(t,s.NATIVE_DBL_CLICK,f),"__$table_row_index"),h="__$uuid",y="__row_expand",b="__row_selection",T="__row_selection_all",_="__row_selection_indeterminate",C="__row_source_data",w="__row_skip_config",O="__col_$uuid",P="__col_source_data",x=42,E={large:78,medium:60,small:42},N="InitColumns";!function(e){e.ASC="asc",e.DESC="desc",e.NULL="null",e.CUSTOM="custom"}(d||(d={}));var S,L,k=[d.ASC,d.DESC,d.NULL,d.CUSTOM],A=80,R=g(210);!function(e){e.CURRENT="current",e.ALL="all"}(S||(S={})),function(e){e.STATIC="static",e.AUTO="auto"}(L||(L={}));var V,H=(0,R.toType)("showOverflowTooltipMode",{default:L.AUTO});!function(e){e.SELECTION="selection",e.INDEX="index",e.EXPAND="expand",e.NONE="none"}(V||(V={}));var j,I=(0,R.toType)("columnType",{default:V.NONE});!function(e){e.FULL="full",e.FUZZY="fuzzy"}(j||(j={}));var W,z=(0,R.toType)("full",{default:j.FULL});!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(W||(W={}));var M,D=(0,R.toType)("columnSize",{default:W.SMALL});!function(e){e.LEFT="left",e.RIGHT="right"}(M||(M={}));var F,U,K=(0,R.toType)("columnSize",{}),B=(0,R.toType)("sortScope",{}).def(S.CURRENT);!function(e){e.MULTI="multi",e.SINGLE="single",e.DISABLED="disabled"}(F||(F={})),function(e){e.DEBOUNCE="debounce",e.THROTTLE="throttle"}(U||(U={}));var G={label:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return""})),r.PropTypes.string.def("")]),field:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return""})),r.PropTypes.string.def("")]),render:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return""})),r.PropTypes.string.def("")]),width:r.PropTypes.oneOfType([r.PropTypes.number.def(void 0),r.PropTypes.string.def("auto")]),minWidth:r.PropTypes.oneOfType([r.PropTypes.number.def(void 0),r.PropTypes.string.def("auto")]).def(30),columnKey:r.PropTypes.string.def(""),showOverflowTooltip:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.shape({content:r.PropTypes.string.def(""),disabled:r.PropTypes.bool.def(!1),watchCellResize:r.PropTypes.bool.def(!0),mode:H})]).def(void 0),type:I,resizable:r.PropTypes.bool.def(!0),fixed:r.PropTypes.oneOfType([r.PropTypes.bool,K]).def(!1),sort:r.PropTypes.oneOfType([r.PropTypes.shape({sortFn:r.PropTypes.func.def(void 0),sortScope:B,value:r.PropTypes.string.def(d.NULL)}),r.PropTypes.bool,r.PropTypes.string]).def(!1),filter:r.PropTypes.oneOfType([r.PropTypes.shape({list:r.PropTypes.arrayOf(r.PropTypes.any).def([]),filterFn:r.PropTypes.func.def(void 0),match:z,filterScope:B,btnSave:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.string]).def("确定"),btnReset:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.string]).def("重置")}),r.PropTypes.bool,r.PropTypes.string]).def(!1),colspan:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return 1})),r.PropTypes.number.def(1)]),rowspan:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return 1})),r.PropTypes.number.def(1)])},q={data:r.PropTypes.arrayOf(r.PropTypes.any).def([]),columns:r.PropTypes.arrayOf(r.PropTypes.shape(G).loose).def([]),activeColumn:r.PropTypes.oneOfType([r.PropTypes.number.def(-1),r.PropTypes.arrayOf(r.PropTypes.number.def(-1))]),columnPick:(0,R.toType)("columnPick",{}).def(F.DISABLED),height:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]).def("auto"),minHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]).def(84),maxHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]).def("auto"),rowHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.func]).def(x),headHeight:r.PropTypes.number.def(x),showHead:r.PropTypes.bool.def(!0),thead:r.PropTypes.shape({height:r.PropTypes.number.def(x),isShow:r.PropTypes.bool.def(!0),cellFn:r.PropTypes.func.def(void 0)}),virtualEnabled:r.PropTypes.bool.def(!1),border:r.PropTypes.oneOfType([r.PropTypes.arrayOf((0,R.toType)("boderType",{})),r.PropTypes.string]).def([n.ROW]),pagination:r.PropTypes.oneOfType([r.PropTypes.bool.def(!1),r.PropTypes.object.def({})]).def(!1),paginationHeihgt:r.PropTypes.number.def(x),remotePagination:r.PropTypes.bool.def(!1),emptyText:r.PropTypes.string,settings:r.PropTypes.oneOfType([r.PropTypes.shape({fields:r.PropTypes.arrayOf(r.PropTypes.shape({label:r.PropTypes.string,field:r.PropTypes.string,disabled:r.PropTypes.bool})),checked:r.PropTypes.arrayOf(r.PropTypes.string),limit:r.PropTypes.number.def(0),size:D,sizeList:r.PropTypes.shape([]),showLineHeight:r.PropTypes.bool.def(!0)}),r.PropTypes.bool]).def(!1),rowClass:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.object,r.PropTypes.func]).def({}),rowStyle:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.object,r.PropTypes.func]).def({}),cellStyle:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.object,r.PropTypes.func]).def({}),cellClass:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.object,r.PropTypes.func]).def({}),scrollLoading:r.PropTypes.oneOfType([r.PropTypes.object,r.PropTypes.bool]).def(void 0),reserveExpand:r.PropTypes.bool.def(!1),selectionKey:r.PropTypes.string.def(""),isSelectedFn:r.PropTypes.func.def(void 0),rowKey:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.func]).def(v),showOverflowTooltip:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.shape({content:r.PropTypes.string.def(""),disabled:r.PropTypes.bool.def(!1),watchCellResize:r.PropTypes.bool.def(!0),mode:H})]).def(!1),asyncData:r.PropTypes.bool.def(!1),rowHover:r.PropTypes.oneOf(u).def(o.HIGHLIGHT),defaultSort:r.PropTypes.shape({}).def({}),isRowSelectEnable:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return!0})),r.PropTypes.bool.def(!0)]).def(!0),resizerWay:(0,R.toType)("ResizerWay",{default:U.DEBOUNCE}),observerResize:r.PropTypes.bool.def(!0)};const $=(0,i.defineComponent)({name:"TableColumn",props:Object.assign(Object.assign({},G),{prop:r.PropTypes.oneOfType([r.PropTypes.func.def((function(){return""})),r.PropTypes.string.def("")])}),setup:function(e,t){var n=t.slots,o=(0,i.inject)(N,(function(e){}),!1);return(0,i.onBeforeMount)((function(){var t=(0,i.reactive)(Object.assign(Object.assign({},e),{field:e.prop||e.field}));o(t),t.render=n.default?function(e){var t;return null===(t=n.default)||void 0===t?void 0:t.call(n,e)}:void 0})),function(){var e;return(0,i.createVNode)(i.Fragment,null,[null===(e=n.default)||void 0===e?void 0:e.call(n,{row:{}})])}}});var X=g(2717),Y=g(3511),Z=g.n(Y);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Q(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function ee(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var ne=function(e,t){if(e){if("object"===te(e)){var n=Object.prototype.hasOwnProperty.call(e,"current")?e.current:e.value;return/\d+/.test(n)||(n=1),Object.assign(Object.assign(Object.assign({},t),e),{current:n})}return t}return{}};const oe=function(e,t){var n=(0,i.ref)(0),o=(0,i.ref)(0),r=(0,i.reactive)({count:0,limit:10,current:1,align:"right",layout:["total","limit","list"]});r=ne(e.pagination,r);var l=(0,i.ref)(null),a=(0,i.reactive)([]),s=function(e,t){"function"==typeof t&&e.sort(t)},u=function(r,i,l){var u,c=t.slice();(null!==(u=null==l?void 0:l.sort)&&void 0!==u?u:{}).sortScope===S.ALL&&s(c,i),a.length=0,a.push.apply(a,ee(c.slice(n.value,o.value))),function(t,n){if("function"==typeof n){var o=t.filter((function(t,o){return n(t,o,e.data)}));t.length=0,t.push.apply(t,ee(o))}}(a,r),s(a,i)};return{pageData:a,localPagination:l,resolvePageData:u,watchEffectFn:function(t,i,a){r=ne(e.pagination,r),e.pagination&&(l.value=e.remotePagination?r:Object.assign(Object.assign({},r),{count:e.data.length})),function(){if(!e.pagination||e.remotePagination)return n.value=0,void(o.value=e.data.length);n.value=(r.current-1)*r.limit,o.value=r.current*r.limit}(),u(t,i,a)}}};var re=g(4870),ie=g.n(re);function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var ue=g(8022),ce=g(5800),de=g.n(ce),fe=g(6870),pe=g(5801),ve=g.n(pe),he=g(4061),ye=g(467),ge=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,o){return e[0]===t&&(n=o,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(t,n){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,o=e(n,t);~o&&n.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];e.call(t,r[1],r[0])}},t}()}(),me="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,be=void 0!==g.g&&g.g.Math===Math?g.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Te="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(be):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},_e=["top","right","bottom","left","width","height","size","weight"],Ce="undefined"!=typeof MutationObserver,we=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,o=!1,r=0;function i(){n&&(n=!1,e()),o&&a()}function l(){Te(i)}function a(){var e=Date.now();if(n){if(e-r<2)return;o=!0}else n=!0,o=!1,setTimeout(l,20);r=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){me&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ce?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){me&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;_e.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Oe=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},Pe=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||be},xe=ke(0,0,0,0);function Ee(e){return parseFloat(e)||0}function Ne(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Ee(e["border-"+n+"-width"])}),0)}var Se="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Pe(e).SVGGraphicsElement}:function(e){return e instanceof Pe(e).SVGElement&&"function"==typeof e.getBBox};function Le(e){return me?Se(e)?function(e){var t=e.getBBox();return ke(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return xe;var o=Pe(e).getComputedStyle(e),r=function(e){for(var t={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],i=e["padding-"+r];t[r]=Ee(i)}return t}(o),i=r.left+r.right,l=r.top+r.bottom,a=Ee(o.width),s=Ee(o.height);if("border-box"===o.boxSizing&&(Math.round(a+i)!==t&&(a-=Ne(o,"left","right")+i),Math.round(s+l)!==n&&(s-=Ne(o,"top","bottom")+l)),!function(e){return e===Pe(e).document.documentElement}(e)){var u=Math.round(a+i)-t,c=Math.round(s+l)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(c)&&(s-=c)}return ke(r.left,r.top,a,s)}(e):xe}function ke(e,t,n,o){return{x:e,y:t,width:n,height:o}}var Ae=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ke(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Le(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Re=function(e,t){var n,o,r,i,l,a,s,u=(o=(n=t).x,r=n.y,i=n.width,l=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(a.prototype),Oe(s,{x:o,y:r,width:i,height:l,top:r,right:o+i,bottom:l+r,left:o}),s);Oe(this,{target:e,contentRect:u})},Ve=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new ge,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Pe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Ae(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Pe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Re(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),He="undefined"!=typeof WeakMap?new WeakMap:new ge,je=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=we.getInstance(),o=new Ve(t,n,this);He.set(this,o)};["observe","unobserve","disconnect"].forEach((function(e){je.prototype[e]=function(){var t;return(t=He.get(this))[e].apply(t,arguments)}}));const Ie=void 0!==be.ResizeObserver?be.ResizeObserver:je;var We=void 0,ze=function e(t,n,o){var r;return"string"==typeof n?Object.prototype.hasOwnProperty.call(t,n)?"function"==typeof t[n]?(r=t[n]).call.apply(r,[We].concat(ee(o))):t[n]:void 0:Array.isArray(n)?n.map((function(n){return e(t,n,o)})).filter((function(e){return void 0!==e})).at(0):void 0},Me=function(e){return/^\d+$/.test("".concat(e))?[parseInt("".concat(e),10)]:[]},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="";return o=/^auto|null|undefined$/gi.test("".concat(e))?t:/^\d+\.?\d+$/.test("".concat(e))?"".concat(e,"px"):e,n&&(o="calc(".concat(o," - ").concat(n,")")),o},Fe=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["resizeWidth","calcWidth","width"];return null!==(n=null!==(t=e[o[0]])&&void 0!==t?t:e[o[1]])&&void 0!==n?n:e[o[2]]},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.getBoundingClientRect()||{},i=r.width,l=i-o,a=l,s=[],u=function(e,t){var n=e.minWidth,o=void 0===n?void 0:n;if(void 0===o)return t<A?A:t;var r=t;return/^\d+\.?\d*$/.test("".concat(o))&&(r=Number(o)),/^\d+\.?\d*%$/.test("".concat(o))&&(r=Number(o)*l/100),/^\d+\.?\d*px$/i.test("".concat(o))&&(r=Number("".concat(o).replace(/px/i,""))),r},c=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=u(e,t),r=t<o?o:t;Object.assign(e,{calcWidth:r}),n&&(a-=r)<0&&(a=0)};if(t.forEach((function(e,t){if(!e.isHidden){var o=String(Fe(e,["resizeWidth","width"])),r=!0;if(/^\d+\.?\d*(px)?$/.test(o)){var i=Number(o.replace("px",""));c(e,i),r=!1}if(/^\d+\.?\d*%$/.test(o)){var l=n;if(a>0){var u=Number(o.replace("%",""));l=a*u/100}c(e,l),r=!1}r&&s.push(t)}})),s.length>0){var d=n;a>0?s.forEach((function(e,n){d=a/(s.length-n),c(t[e],d,!1);var o=t[e].calcWidth;a-=o})):s.forEach((function(e){var n=u(t[e],A);Object.assign(t[e],{calcWidth:n})}))}},Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"throttle",i=function(){"function"==typeof t&&t()},l="debounce"===r?(0,ye.debounce)(i,n):(0,ye.throttle)(i,n),a=function(){return Reflect.apply(l,We,[])},s=new Ie((function(){a()}));return o&&"function"==typeof t&&t(),{start:function(){s.observe(e)},disconnect:function(){s.unobserve(e),s.disconnect()}}},Be=function(e){var t=e.showHead,n=e.headHeight,o=e.thead,r=void 0===o?{}:o;return Object.assign({},{isShow:t,height:n},Object.assign({},r))},Ge=function(e,t,n){return"index"===n.type?e[v]+1:(0,ye.get)(e,t)},qe=function e(t,n){return Array.isArray(t)?t:"string"==typeof t||"object"===te(t)?[t]:"function"==typeof t?e(Reflect.apply(t,We,n),n):[]},$e=function(e,t,n){return"string"==typeof t.rowKey?t.rowKey===v?"__ROW_INDEX_".concat(n):(0,ye.get)(e,t.rowKey):"function"==typeof t.rowKey?Reflect.apply(t.rowKey,We,[e]):(0,ue.v4)()},Xe=function(e,t,n){var o;return o=t,e.some((function(e){return e.field===ze(o,["field","type"],[o])}))&&n.length&&!n.includes(ze(t,["field","type"],[t]))},Ye=function(e,t,n,o,r){return"function"==typeof e[r]?Reflect.apply(e[r],We,[{column:e,colIndex:t,row:n,rowIndex:o}]):"number"==typeof e[r]?e[r]:1},Ze=function(e,t,n,o){return{colspan:Ye(e,t,n,o,"colspan"),rowspan:Ye(e,t,n,o,"rowspan")}},Je=function(e,t){var n,o,r=e.field,i=function(t){return Ge(t,r,e)},l="function"==typeof(null===(n=e.sort)||void 0===n?void 0:n.sortFn)?null===(o=e.sort)||void 0===o?void 0:o.sortFn:function(e,t){var n=i(e)||"",o=i(t)||"";return"number"==typeof n&&"number"==typeof o?n-o:String.prototype.localeCompare.call(n,o)};return t===d.NULL?function(){return!0}:function(e,n){return l(e,n)*(t===d.DESC?-1:1)}},Qe=function(e){var t,n=(l(t={},d.NULL,0),l(t,d.ASC,1),l(t,d.DESC,2),t);return void 0===e?d.NULL:Object.keys(n)[(n[e]+1)%3]},et=function(e){return"string"==typeof e?{value:e}:"boolean"==typeof e&&e?{value:d.NULL}:"object"===te(e)&&null!==e?te(e.sortFn)?Object.assign({value:"custom"},e):e:null},tt=function(e,t){var n=t.row,o=t.index,r=t.isCheckAll;return"boolean"==typeof e.isRowSelectEnable?!1!==e.isRowSelectEnable:"function"!=typeof e.isRowSelectEnable||e.isRowSelectEnable({row:n,index:o,isCheckAll:r})},nt=function(e,t,n){if(void 0!==e.__$uuid)return e.__$uuid;var o=$e(e,n,t);return void 0!==o&&void 0!==e[o]?e[o]:t},ot=function(e){return(0,i.unref)(e.__row_source_data||e)},rt=function(e){return(0,i.unref)(e.__col_source_data||e)};const it=(0,i.defineComponent)({name:"TableCell",props:{column:r.PropTypes.any.def({}),row:r.PropTypes.any.def({}),parentSetting:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.shape({content:r.PropTypes.string.def(""),disabled:r.PropTypes.bool.def(!1),watchCellResize:r.PropTypes.bool.def(!0),mode:H})]).def(void 0),title:r.PropTypes.string.def(void 0),observerResize:r.PropTypes.bool.def(!0),resizerWay:(0,R.toType)("ResizerWay",{default:U.DEBOUNCE})},setup:function(e,t){var n=this,o=t.slots,l=(0,i.ref)(),a=(0,i.ref)(!1),s=(/boolean|object/.test(te(e.column.showOverflowTooltip))&&null!==e.column.showOverflowTooltip?e.column:{showOverflowTooltip:e.parentSetting}).showOverflowTooltip,u=void 0!==s&&s,c=null,d=function(){var t=!0,o=e.resizerWay,r=l.value.innerText,i="auto",a=!0;return"boolean"==typeof u&&(t=!u),"object"===te(u)&&(t=u.disabled,o=u.resizerWay||"debounce",r=u.content||l.value.innerText,"function"==typeof u.content&&(r=u.content(e.column,e.row)),a=u.watchCellResize,i=u.mode||"auto"),"function"==typeof t&&(t=Reflect.apply(t,n,[e.column,e.row])),{disabled:t,content:r,mode:i,resizerWay:o,watchCellResize:a}},f=function(){if(l.value&&(0,r.isElement)(l.value)){var e=d(),t=e.mode,n=e.disabled;if(a.value=!n,"auto"===t&&(a.value=(0,r.hasOverflowEllipsis)(l.value)),"static"===t&&(a.value=!0),a.value){var o=(0,i.ref)(d());null===c&&(c=(0,he.bkEllipsisInstance)(l.value,{disabled:o.value.disabled,content:o.value.content,mode:o.value.mode}))}else null==c||c.destroyInstance(l.value),c=null}};return(0,i.onMounted)((function(){var t=d(),n=t.disabled,o=t.resizerWay,r=t.watchCellResize;if(!n&&(f(),!1!==r&&e.observerResize)){var a=Ke(l.value,(function(){f()}),60,!0,o);a.start(),(0,i.onBeforeUnmount)((function(){a.disconnect(),a=null}))}})),(0,i.onBeforeUnmount)((function(){null==c||c.destroyInstance(l.value)})),function(){var t;return(0,i.createVNode)("div",{class:["cell",e.column.type],ref:l,title:e.title},[null===(t=o.default)||void 0===t?void 0:t.call(o)])}}}),lt=(0,i.defineComponent)({name:"TableRow",render:function(){var e,t;return(0,i.createVNode)(i.Fragment,null,[null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)])}});var at=g(9911),st=g.n(at);const ut=(0,i.defineComponent)({name:"BodyEmpty",props:{list:r.PropTypes.array.def([]),filterList:r.PropTypes.array.def([]),emptyText:r.PropTypes.string},emits:["change"],setup:function(e){var t=(0,X.useLocale)("table"),n=(0,i.computed)((function(){return void 0===e.emptyText?t.value.emptyText:e.emptyText})),o=(0,i.computed)((function(){return 0===e.list.length?"empty":"search-empty"}));return function(){return(0,i.createVNode)(st(),{scene:"part",type:o.value,description:n.value},null)}}});var ct=g(5537),dt=g.n(ct);const ft=(0,i.defineComponent)({name:"HeadFilter",props:{column:r.PropTypes.any.def({}),height:r.PropTypes.number.def(x)},emits:["change","filterSave"],setup:function(e,t){var n=t.emit,o=(0,X.useLocale)("table"),a=e.column,s=(0,i.reactive)({isOpen:!1,checked:[]}),u=(0,i.computed)((function(){var t;return(0,r.classes)((l(t={},(0,r.resolveClassName)("table-head-action"),!0),l(t,"column-filter",!0),l(t,"--row-height","".concat(e.height,"px")),l(t,"active",s.checked.length),l(t,"opened",s.isOpen),t))})),c=(0,r.classes)(l({},(0,r.resolveClassName)("table-head-filter"),!0)),d=(0,i.ref)(null),f=function(e){s.isOpen=e,e&&setTimeout((function(){d.value.reset()}))},p="light ".concat((0,r.resolveClassName)("table-head-filter")),v=(0,i.computed)((function(){var e=a.filter.list;return void 0===e?[]:e})),h="function"==typeof a.filter.filterFn?function(t,n,o,r){return a.filter.filterFn(t,n,e.column,o,r)}:function(e,t){return!e.length||function(e,t){var n=a.filter.match,o=Ge(t,ze(a,"field",[a,t]),a);return"full"===n&&e.includes(o),e.some((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ig";return new RegExp("".concat(e).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t)}(e,"img").test(o)}))}(e,t)},y=function(){g(!0),n("filterSave",ee(s.checked)),s.isOpen=!1},g=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=b(_,o.value.confirm),i=r.disabled;if(i||t){if("custom"===e.column.filter)return n("change",ee(s.checked),null),void(s.isOpen=!1);n("change",ee(s.checked),h)}},m=function(){s.checked.length&&(s.checked.length=0,s.isOpen=!1,(0,i.nextTick)((function(){return n("change",s.checked,h)})))},b=function(e,t){return{disabled:"disabled"===e||!1===e,text:"string"==typeof e?e:t}},T=a.filter,_=T.btnSave,C=T.btnReset,w=function(){var e=b(C,o.value.reset),t=e.disabled,n=e.text;return t?"":(0,i.createVNode)("span",{class:["btn-filter-reset",s.checked.length?"":"disable"],onClick:m},[n])},O=function(e){return e.data.length?e.data.map((function(e){return(0,i.createVNode)("div",{class:"list-item"},[(0,i.createVNode)(de(),{label:e.value,key:e.$index,immediateEmitChange:!1,checked:s.checked.includes(e.value),modelValue:s.checked.includes(e.value),onChange:function(t){return function(e,t){var n,o=new Set(s.checked);e?o.add(t.value):o.delete(t.value),s.checked.length=0,(n=s.checked).push.apply(n,ee(Array.from(o))),g()}(t,e)}},{default:function(){return["".concat(e.text)]}})])})):(0,i.createVNode)("div",{class:"list-item is-empty"},[o.value.emptyText])};return function(){return(0,i.createVNode)(dt(),(0,i.mergeProps)({trigger:"click",isShow:s.isOpen,placement:"bottom-start",renderType:r.RenderType.SHOWN,arrow:!1,offset:0},{theme:p},{onAfterShow:function(){return f(!0)},onAfterHidden:function(){return f(!1)}}),{default:function(){return(0,i.createVNode)(fe.Funnel,{class:u.value},null)},content:function(){return(0,i.createVNode)("div",{class:c},[(0,i.createVNode)(ce.BkCheckboxGroup,{class:"content-list"},{default:function(){return[(0,i.createVNode)(Z(),{lineHeight:32,list:v.value,throttleDelay:0,scrollEvent:!0,ref:d,className:"content-items"},{default:O})]}}),(0,i.createVNode)("div",{class:"content-footer"},[(e=b(_,o.value.confirm),t=e.disabled,n=e.text,t?(0,i.createVNode)("span",{class:"btn-filter-save disabled"},[n]):(0,i.createVNode)("span",{class:"btn-filter-save",onClick:y},[n])),(0,i.createVNode)("span",{class:"btn-filter-split"},null),w()])]);var e,t,n}})}}});var pt=g(7685);const vt=(0,i.defineComponent)({name:"HeadSort",props:{column:r.PropTypes.any.def({}),defaultSort:r.PropTypes.oneOf(k).def(d.NULL)},emits:["change"],setup:function(e,t){var n,o,l=t.emit,a=(null===(o=null===(n=e.column)||void 0===n?void 0:n.sort)||void 0===o?void 0:o.value)||e.defaultSort||d.NULL,s=(0,i.ref)(a);(0,i.watch)((function(){return[e.defaultSort]}),(function(e){var t,n,o=(t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);l=!0);}catch(e){a=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw r}}return i}}(t,n)||Q(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];s.value=o}));var u=function(t,n){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();var o=n;n===d.NULL&&(o=Qe(n)),s.value===n&&(o=d.NULL);var r=et(e.column.sort);if("custom"!==(null==r?void 0:r.value)){var i=Je(e.column,o);l("change",i,o)}else l("change",null==r?void 0:r.sortFn,o)};return function(){return(0,i.createVNode)("span",{class:(0,r.resolveClassName)("head-cell-sort"),onClick:function(e){return u(e,d.NULL)}},[(0,i.createVNode)(pt.AngleDownFill,{class:["sort-action","sort-asc",s.value===d.ASC?"active":""],onClick:function(e){return u(e,d.ASC)}},null),(0,i.createVNode)(pt.AngleUpFill,{class:["sort-action","sort-desc",s.value===d.DESC?"active":""],onClick:function(e){return u(e,d.DESC)}},null)])}}});var ht=se((function e(t,n){le(this,e),this.props=null,this.ctx=null,this.props=t,this.ctx=n})),yt=g(4976),gt=g.n(yt);function mt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.isVNode)(e)}const bt=(0,i.defineComponent)({name:"Settings",props:{settings:r.PropTypes.oneOfType([r.PropTypes.shape({fields:r.PropTypes.arrayOf(r.PropTypes.shape({label:r.PropTypes.string,field:r.PropTypes.string,disabled:r.PropTypes.bool})),checked:r.PropTypes.arrayOf(r.PropTypes.string),limit:r.PropTypes.number.def(0),size:D.def(W.SMALL),sizeList:r.PropTypes.shape([]),showLineHeight:r.PropTypes.bool.def(!0)}),r.PropTypes.bool]).def(!1),columns:r.PropTypes.array.def([]),rowHeight:r.PropTypes.number.def(x)},emits:["change"],setup:function(e,t){var n=t.emit,o=(0,X.useLocale)("table"),l=function(e){return[{value:"small",label:e.value.setting.lineHeight.small,height:E.small},{value:"medium",label:e.value.setting.lineHeight.medium,height:E.medium},{value:"large",label:e.value.setting.lineHeight.large,height:E.large}]}(o),a=function(e,t){return ze(e,["field","type"],[e,t])},s=(0,i.ref)(!1),u=(0,i.ref)(!1),c=(0,i.computed)((function(){return"boolean"==typeof e.settings?{fields:e.columns.map((function(e){return Object.assign(Object.assign({},e),{field:e.field||e.type})})),checked:[],limit:0,size:"small",sizeList:l,showLineHeight:!0}:e.settings})),d=(0,i.ref)(c.value.size||"small"),f=(0,i.ref)(e.rowHeight),p=(0,i.ref)(c.value.checked||[]),v=(0,r.resolveClassName)("table-settings"),h="light ".concat(v),y=(0,i.computed)((function(){return c.value.fields||e.columns||[]})),g={checkAll:s.value,activeSize:d.value,activeHeight:f.value,checkedFields:c.value.checked||[]},m=function(){Object.assign(g,{checkAll:s.value,activeSize:d.value,activeHeight:f.value,checkedFields:p.value}),n("change",{checked:p.value,size:d.value,height:f.value,fields:(0,i.unref)(y)}),u.value=!1},b=function(){s.value=g.checkAll,d.value=g.activeSize,f.value=g.activeHeight,p.value=g.checkedFields,u.value=!1},T=function(){u.value=!0},_=function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),s.value=!s.value;var n=c.value.fields||e.columns||[],o=n.filter((function(e,t){return e.disabled&&p.value.includes(a(e,t))})).map((function(e,t){return a(e,t)}));if(s.value){var r,i=n.filter((function(e){return!e.disabled})).map((function(e,t){return a(e,t)}));(r=p.value).splice.apply(r,[0,p.value.length].concat(ee(i),ee(o)))}else{var l;(l=p.value).splice.apply(l,[0,p.value.length].concat(ee(o)))}},C=(0,i.computed)((function(){var e;return(null!==(e=c.value.limit)&&void 0!==e?e:0)>0})),w=c.value.sizeList||l,O=(0,i.computed)((function(){return C.value&&(c.value.limit?c.value.limit:0)<=p.value.length})),P=function(e,t){return e.disabled||O.value&&!p.value.includes(a(e,t))},x=function(e){return{"line-size":!0,"is-medium":"medium"===d.value,active:e.value===d.value}},N={marginRight:"12px"},S=(0,i.computed)((function(){return p.value.length>0&&!y.value.every((function(e,t){return p.value.includes(ze(e,"field",[e,t]))}))})),L=(0,i.computed)((function(){return"boolean"!=typeof c.value.showLineHeight||c.value.showLineHeight}));return(0,i.watch)((function(){return[p.value]}),(function(){p.value.length||(s.value=!1),p.value.length&&y.value.every((function(e,t){return p.value.includes(a(e,t))}))&&(s.value=!0)}),{immediate:!0,deep:!0}),(0,i.watch)((function(){return[e.settings.checked]}),(function(){var e;(e=p.value).splice.apply(e,[0,p.value.length].concat(ee(c.value.checked)))}),{immediate:!0,deep:!0}),function(){return e.settings?(0,i.createVNode)(dt(),(0,i.mergeProps)({trigger:"manual",isShow:u.value,placement:"bottom-end",arrow:!0},{theme:h}),{default:function(){return(0,i.createVNode)("span",{class:"table-head-settings",onClick:T},[(0,i.createVNode)(pt.CogShape,{style:"color: #c4c6cc;"},null)])},content:function(){var e;return(0,i.createVNode)("div",{class:"setting-content"},[(0,i.createVNode)("div",{class:"setting-head"},[(0,i.createVNode)("span",{class:"head-title"},[o.value.setting.title]),(0,i.createVNode)(pt.CloseLine,{class:"icon-close-action",onClick:b},null)]),(0,i.createVNode)("div",{class:"setting-body"},[(0,i.createVNode)("div",{class:"setting-body-title"},[(0,i.createVNode)("div",null,[(0,i.createVNode)("span",{class:"field-setting-label"},[o.value.setting.fields.title]),C.value?(0,i.createVNode)("span",{class:"limit"},[o.value.setting.fields.subtitle(c.value.limit)]):""]),C.value?"":(0,i.createVNode)("span",{class:"check-all",onClick:_},[(0,i.createVNode)(de(),{label:o.value.setting.fields.selectAll,indeterminate:Boolean(S.value),modelValue:p.value.length>0},{default:function(){return[o.value.setting.fields.selectAll]}})])]),(0,i.createVNode)(ce.BkCheckboxGroup,{class:"setting-body-fields",modelValue:p.value,"onUpdate:modelValue":function(e){return p.value=e}},mt(e=y.value.map((function(e,t){var n;return(0,i.createVNode)("div",{class:"field-item"},[(0,i.createVNode)(de(),{checked:p.value.includes(a(e,t)),label:a(e,t),disabled:P(e,t)},mt(n=ze(e,"label",[e,t]))?n:{default:function(){return[n]}})])})))?e:{default:function(){return[e]}}),L.value?(0,i.createVNode)("div",{class:"setting-body-line-height"},[o.value.setting.lineHeight.title,(0,i.createTextVNode)("："),w.map((function(e){return(0,i.createVNode)("span",{class:x(e),onClick:function(){return function(e){d.value=e.value,f.value=e.height}(e)}},[e.label])}))]):""]),(0,i.createVNode)("div",{class:"setting-footer"},[(0,i.createVNode)(gt(),{theme:"primary",style:N,onClick:m},{default:function(){return[o.value.setting.options.ok]}}),(0,i.createVNode)(gt(),{style:N,onClick:b},{default:function(){return[o.value.setting.options.cancel]}})])])}}):""}}}),Tt=function(e,t,n){var o=function(e){return"right"===e.fixed?"right":"left"},a={left:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t.filter((function(e){return!e.isHidden&&e.fixed&&"right"!==e.fixed})).reduce((function(t,n,o){return e&&0===o?t:t+Fe(n)}),0)},right:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t.filter((function(e){return!e.isHidden&&"right"===e.fixed})).reduce((function(t,n,o){return e&&0===o?t:t+Fe(n)}),n?6:0)}},s=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=n.__col_$uuid,l="right"===e?-1:1,a=t.filter((function(e){return!e.isHidden})),s=a.length,u="right"===e?s*l:1,c=0;;){u+=-1*l;var d=Math.abs(u),f=a[d],p=o(f),v=f.__col_$uuid;if(p===e&&i!==v){var h=Fe(f);c+=h}if(i===v)break}return c+r},u=(0,i.computed)((function(){var e={left:!1,right:!1};return t.filter((function(e){return!e.isHidden&&e.fixed})).map((function(t){var n=o(t),r=e[n];return e[n]=!0,{isExist:r,colPos:n,column:t}}))}));return{fixedWrapperClass:(0,r.resolveClassName)("table-fixed"),resolveFixedColumnStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.fixed||e.isHidden)return{};var n={left:0,right:t?6:-1},r=o(e);return n[r]=s(r,e,n[r]),l({},r,"".concat(n[r],"px"))},fixedColumns:u,resolveColumnStyle:function(e){return{width:"".concat(a[e](!1),"px"),bottom:"0px"}},resolveColumnClass:function(e,t,n){return{column_fixed:!!e.fixed,column_fixed_left:"right"!==e.fixed,column_fixed_right:"right"===e.fixed,shadow:"right"===e.fixed?n-t>2:t>0}}}};function _t(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.isVNode)(e)}var Ct=function(){function e(t,n,o,r,i,a){var s=this;le(this,e),this.getRowHeight=function(e,t){var n=s.setting,o=n.size;return null!=n.height?ze(s.setting,"height",["tbody",e,t,o]):ze(s.props,"rowHeight",["tbody",e,t])},this.getColumnClass=function(e,t){var n;return l(n={},"".concat(s.uuid,"-column-").concat(t),!0),l(n,"column_fixed",!!e.fixed),l(n,"column_fixed_left",!!e.fixed),l(n,"column_fixed_right","right"===e.fixed),n},this.getHeadColumnClass=function(e,t){return Object.assign(Object.assign({},s.getColumnClass(e,t)),{active:s.isColActive(t)})},this.props=t,this.context=n,this.reactiveProp=o,this.colgroups=r,this.plugins=new ht(t,n),this.uuid=(0,ue.v4)(),this.events=new Map,this.styleRef=i,this.t=a}return se(e,[{key:"propActiveCols",get:function(){return this.reactiveProp.activeColumns}},{key:"renderTableHeadSchema",value:function(){var e=this,t=Be(this.props).isShow;return void 0===t||t?[this.props.settings?(0,i.createVNode)(bt,{class:"table-head-settings",settings:this.reactiveProp.settings,columns:this.colgroups,rowHeight:this.props.rowHeight,onChange:function(t){var n,o=t.checked,r=void 0===o?[]:o,i=t.size,l=t.height;e.reactiveProp.setting.size=i,e.reactiveProp.setting.height=l;var s=(null===(n=e.props.settings)||void 0===n?void 0:n.fields)||[];r.length&&e.colgroups.forEach((function(e){e.isHidden=Xe(s,e,r)})),e.emitEvent(a.ON_SETTING_CHANGE,[t])}},null):"",(0,i.createVNode)("table",{cellpadding:0,cellspacing:0},[this.renderColGroup(),this.renderHeader()])]:null}},{key:"renderTableBodySchema",value:function(e){var t,n,o,r=this,l=(0,i.computed)((function(){return void 0===r.props.emptyText?r.t.value.emptyText:r.props.emptyText}));return e.length?(0,i.createVNode)("table",{cellpadding:0,cellspacing:0,"data-table-uuid":this.uuid},[this.renderColGroup(),this.renderTBody(e)]):null!==(o=null===(n=(t=this.context.slots).empty)||void 0===n?void 0:n.call(t))&&void 0!==o?o:(0,i.createVNode)(ut,{filterList:e,list:this.props.data,emptyText:l.value},null)}},{key:"renderTableFooter",value:function(e){var t=this;return(0,i.createVNode)(ve(),(0,i.mergeProps)(e,{modelValue:e.current,onLimitChange:function(e){return t.handlePageLimitChange(e)},onChange:function(e){return t.handlePageChange(e)}}),null)}},{key:"on",value:function(e,t){return this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t),this}},{key:"destroy",value:function(){this.events.clear(),this.events=null}},{key:"emitEvent",value:function(e,t){var n=this;this.events.has(e)&&this.events.get(e).forEach((function(e){"function"==typeof e&&Reflect.apply(e,n,t)}))}},{key:"handlePageLimitChange",value:function(e){Object.assign(this.props.pagination,{limit:e}),this.context.emit(s.PAGE_LIMIT_CHANGE,e)}},{key:"handlePageChange",value:function(e){Object.assign(this.props.pagination,{current:e,value:e}),this.context.emit(s.PAGE_VALUE_CHANGE,e)}},{key:"setColumnActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.propActiveCols.find((function(t){return t.index===e}));Object.assign(n,{active:!n.active}),t&&this.propActiveCols.filter((function(t){return t.index!==e&&t.active})).forEach((function(e){Object.assign(e,{active:!1})}))}},{key:"handleColumnHeadClick",value:function(e,t){if("disabled"!==this.props.columnPick&&(this.setColumnActive(e,"single"===this.props.columnPick),this.context.emit(s.COLUMN_PICK,this.propActiveCols)),t.sort&&!t.filter){var n=ze(t,["field","type"],[t,e]),o=Qe(this.reactiveProp.defaultSort[n]);Object.assign(this.reactiveProp.defaultSort,l({},n,o));var r=Je(t,o);this.emitEvent(a.ON_SORT_BY_CLICK,[{sortFn:r,column:t,index:e,type:o}])}}},{key:"getSortCell",value:function(e,t){var n=this,o=ze(e,["field","type"],[e,t]),r=this.reactiveProp.defaultSort[o];return(0,i.createVNode)(vt,{column:e,defaultSort:r,onChange:function(r,i){Object.assign(n.reactiveProp.defaultSort,l({},o,i)),n.emitEvent(a.ON_SORT_BY_CLICK,[{sortFn:r,column:e,index:t,type:i}])}},null)}},{key:"getFilterCell",value:function(e,t){var n=this;return(0,i.createVNode)(ft,{column:e,height:this.props.headHeight,onChange:function(o,r){n.emitEvent(a.ON_FILTER_CLICK,[{filterFn:function(e,t){return r(o,e,t)},checked:o,column:e,index:t}])},onFilterSave:function(t){n.context.emit(s.COLUMN_FILTER_SAVE,{column:e,values:t})}},null)}},{key:"renderHeader",value:function(){var e=this,t=Be(this.props),n=t.cellFn,o={"--row-height":"".concat(ze(t,"height",["thead"]),"px")},r=function(t,o){if("selection"===t.type){var r=e.reactiveProp.rowActions.get(T);return e.renderCheckboxColumn(l({},b,!!r),0,!0)}var a=[];t.sort&&a.push(e.getSortCell(t,o)),t.filter&&a.push(e.getFilterCell(t,o));var s=function(e,t){return"function"==typeof n?n(e,t):ze(e,"label",[e,t])}(t,o);a.unshift((0,i.createVNode)("span",{class:"head-text"},[s]));var u="string"==typeof s?s:void 0;return(0,i.createVNode)(it,{title:u,observerResize:e.props.observerResize,resizerWay:e.props.resizerWay},_t(a)?a:{default:function(){return[a]}})},a=Tt(this.props,this.colgroups).resolveFixedColumnStyle,s=function(){if(e.styleRef.value.hasScrollY){var t={width:"".concat(8,"px"),right:"-1px"};return(0,i.createVNode)("th",{style:t,class:"column_fixed"},null)}};return(0,i.createVNode)("thead",{style:o},[(0,i.createVNode)(lt,null,{default:function(){return[(0,i.createVNode)("tr",null,[e.filterColgroups.map((function(t,n){return(0,i.createVNode)("th",(0,i.mergeProps)({colspan:1,rowspan:1,class:e.getHeadColumnClass(t,n),style:a(t,e.styleRef.value.hasScrollY),onClick:function(){return e.handleColumnHeadClick(n,t)}},(o=t,Array.from(o.listeners.keys()).reduce((function(t,n){var r=n.split("_").slice(-1)[0];return Object.assign(t,l({},r,(function(t){o.listeners.get(n).forEach((function(n){return Reflect.apply(n,e,[t,o,e])}))})))}),{}))),[r(t,n)]);var o})),s()])]}})])}},{key:"renderTBody",value:function(e){var t=this,n=Tt(this.props,this.colgroups).resolveFixedColumnStyle,o=e.length;return(0,i.createVNode)("tbody",null,[e.map((function(r,l){var a=[].concat(ee(qe(t.props.rowStyle,[r,l,t])),[{"--row-height":"".concat(t.getRowHeight(r,l),"px")}]),u=[].concat(ee(qe(t.props.rowClass,[r,l,t])),["hover-".concat(t.props.rowHover)]),c=nt(r,l,t.props);return[(0,i.createVNode)(lt,{key:c},{default:function(){return[(0,i.createVNode)("tr",{style:a,class:u,onClick:function(n){return t.handleRowClick(n,r,l,e)},onDblclick:function(n){return t.handleRowDblClick(n,r,l,e)}},[t.filterColgroups.map((function(a,u){var c,d,f=[n(a)].concat(ee(qe(t.props.cellStyle,[a,u,r,l,t]))),p={"expand-cell":"expand"===a.type},v="__CELL_".concat(l,"_").concat(u),h=Ze(a,u,r,l),y=h.colspan,g=h.rowspan,m=a.__col_$uuid,b=null!==(d=null===(c=r.__row_skip_config)||void 0===c?void 0:c[m])&&void 0!==d?d:{},T=b.skipRow,_=void 0!==T&&T,C=b.skipCol;if(!(_||void 0!==C&&C)){var w,O=[t.getColumnClass(a,u)].concat(ee(qe(t.props.cellClass,[a,u,r,l,t])),[{"expand-row":r.__row_expand,"is-last":l+g>=o}]),P=function(n,o){var i={event:n,row:ot(r),column:rt(a),cell:{getValue:function(){return t.renderCell(r,a,l,e)}},rowIndex:l,columnIndex:u};t.context.emit(o,i)};return(0,i.createVNode)("td",{class:O,style:f,key:v,colspan:y,rowspan:g,onClick:function(e){return P(e,s.CELL_CLICK)},onDblclick:function(e){return P(e,s.CELL_DBL_CLICK)}},[(0,i.createVNode)(it,{class:p,column:a,row:r,parentSetting:t.props.showOverflowTooltip,observerResize:t.props.observerResize},_t(w=t.renderCell(r,a,l,e))?w:{default:function(){return[w]}})])}return null}))])]}}),t.renderExpandRow(r,u,l)]}))])}},{key:"renderExpandRow",value:function(e,t,n){var o,r,l,a=this;if(e.__row_expand){var s=[].concat(ee(t),[{row_expend:!0}]),u=nt(e,n,this.props),c="".concat(u,"_expand");return(0,i.createVNode)(lt,{key:c},{default:function(){return[(0,i.createVNode)("tr",{class:s},[(0,i.createVNode)("td",{colspan:a.filterColgroups.length,rowspan:1},[null!==(l=null===(r=(o=a.context.slots).expandRow)||void 0===r?void 0:r.call(o,ot(e)))&&void 0!==l?l:(0,i.createVNode)("div",{class:"expand-cell-ctx"},[(0,i.createTextVNode)("Expand Row")])])])]}})}}},{key:"handleRowClick",value:function(e,t,n,o){this.context.emit(s.ROW_CLICK,e,t,n,o,this)}},{key:"handleRowDblClick",value:function(e,t,n,o){this.context.emit(s.ROW_DBL_CLICK,e,t,n,o,this)}},{key:"getExpandCell",value:function(e){return e.__row_expand?(0,i.createVNode)(fe.DownShape,null,null):(0,i.createVNode)(fe.RightShape,null,null)}},{key:"handleRowExpandClick",value:function(e,t,n,o,r){this.emitEvent(a.ON_ROW_EXPAND_CLICK,[{row:e,column:t,index:n,rows:o,e:r}])}},{key:"renderCellCallbackFn",value:function(e,t,n,o){var r=Ge(e,ze(t,"field",[t,e]),t),i=e[v],l="number"==typeof i?i:n,a=this.props.data[l];return t.render({cell:r,data:a,row:e,column:t,index:n,rows:o})}},{key:"renderCheckboxColumn",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(r){n.emitEvent(a.ON_ROW_CHECK,[{row:e,index:t,isAll:o,value:r}])},l=o&&!!this.reactiveProp.rowActions.get(_),s=tt(this.props,{row:e,index:t,isCheckAll:o});return(0,i.createVNode)(de(),{onChange:r,disabled:!s,modelValue:e.__row_selection,indeterminate:l},null)}},{key:"renderExpandColumn",value:function(e,t,n,o){var r,l,a,s=this;return(0,i.createVNode)("span",{class:"expand-btn-action",onClick:function(r){return s.handleRowExpandClick(e,t,n,o,r)}},["function"==typeof t.render?s.renderCellCallbackFn(e,t,n,o):null!==(a=null===(l=(r=s.context.slots).expandCell)||void 0===l?void 0:l.call(r,{row:e,column:t,index:n,rows:o}))&&void 0!==a?a:s.getExpandCell(e)])}},{key:"renderCell",value:function(e,t,n,o){var r,i,l,a=this,s={expand:function(e,t,n,o){return a.renderExpandColumn(e,t,n,o)},selection:function(e,t,n,o){return a.renderCheckboxColumn(e,n)}};return null!==(i=null===(r=s[t.type])||void 0===r?void 0:r.call(s,e,t,n,o))&&void 0!==i?i:(l=Ge(e,ze(t,"field",[t,e]),t),"function"==typeof t.render?a.renderCellCallbackFn(e,t,n,o):l)}},{key:"isColActive",value:function(e){return"disabled"!==this.props.columnPick&&this.propActiveCols.some((function(t){return t.index===e&&t.active}))}},{key:"renderColGroup",value:function(){var e=this;return(0,i.createVNode)("colgroup",null,[(this.filterColgroups||[]).map((function(t,n){var o,l=(0,r.classes)({active:e.isColActive(n)}),a="".concat((o=Fe(t),De(o,"auto"))).replace(/px$/i,"");return(0,i.createVNode)("col",{class:l,width:a},null)}))])}},{key:"filterColgroups",get:function(){return this.colgroups.filter((function(e){return!e.isHidden}))}},{key:"setting",get:function(){return this.reactiveProp.setting}}]),e}();const wt=function(e,t){return{initColumns:function(e){(Array.isArray(e)?e:[e]).forEach((function(e){if(!t.find((function(t){return t.label===e.label&&t.field===e.field}))){var n=(0,i.unref)(e);t.push(n)}}))},getColumns:function(){var n;return(null==t?void 0:t.length)?t:(null===(n=e.columns)||void 0===n?void 0:n.length)?e.columns:[]}}};var Ot=function(e){return"disabled"!==e.columnPick?"multi"===e.columnPick?Array.isArray(e.activeColumn)?e.activeColumn:Me(e.activeColumn):Array.isArray(e.activeColumn)?Me(e.activeColumn[0]):Me(e.activeColumn):[]};var Pt=void 0,xt=function(e,t,o,a,s){var u,d=wt(e,t).getColumns,f=(0,i.ref)(200),p=(0,i.ref)(!1),v=(0,i.computed)((function(){return e.pagination&&e.data.length})),h=(0,i.computed)((function(){return p.value})),y=(0,i.computed)((function(){var t,n,o;return(0,r.classes)((l(t={},(0,r.resolveClassName)("table"),!0),l(t,"has-footer",v.value),l(t,"has-scroll-y",p.value||e.virtualEnabled),t),(o=["row"],"string"==typeof(n=e.border)&&o.push(n),Array.isArray(n)&&o.push.apply(o,ee(n.filter((function(e){return c.includes(e)})))),ee(new Set(o)).map((function(e){return"bordered-".concat(e)})).join(" ")))})),g=(0,r.classes)((l(u={},(0,r.resolveClassName)("table-head"),!0),l(u,"has-settings",!!e.settings),u)),m=Be(e),b=(0,i.computed)((function(){return{"--row-height":"".concat(ze(m,"height",["thead"]),"px"),"--scroll-head-left":"-".concat(a.scrollTranslateX,"px"),"--scroll-left":"".concat(a.scrollTranslateX,"px")}})),T=l({},(0,r.resolveClassName)("table-body"),!0),_=(0,i.computed)((function(){var t;return(0,r.classes)((l(t={},(0,r.resolveClassName)("table-footer"),!0),l(t,"is-hidden",!e.pagination||!e.data.length),t))})),C=function(){var e=d();if(e.every((function(e){return/^\d+\.?\d*(px)?$/gi.test("".concat(e.width))}))){var t=e.reduce((function(e,t){return e+Number("".concat(t.width).replace(/px/gi,""))}),0),n=p.value?6:0;return"".concat(t+n,"px")}return"100%"},w=(0,i.computed)((function(){return{minHeight:De(e.minHeight,"auto"),width:C(),maxWidth:"100%"}})),O=function(e,t){var n=String(e);return/^\d+\.?\d*$/.test(n)?Number(n):/^\d+\.?\d*px$/gi.test(n)?Number(n.replace("px","")):/^\d+\.?\d*%$/gi.test(n)&&"number"==typeof t?t*Number(n.replace("%",""))/100:t},P=(0,i.reactive)({display:"","min-height":"",height:"",maxHeight:""});(0,i.onMounted)((function(){E(null==o?void 0:o.value)}));var E=function(t){if(t){var n=t.parentElement.getBoundingClientRect().height;f.value=n,function(){var t=O(e.height,f.value),n=e.showHead?O(e.headHeight,x):0,o=O(e.minHeight,f.value),r=e.pagination&&e.data.length?e.paginationHeihgt:0,i=t-n-r,l="auto"!==e.height&&"".concat(i,"px"),a=o-n-r,u=O(e.maxHeight,void 0),c="number"==typeof u&&"".concat(u-n-r,"px");Object.assign(P,{display:!!(null==s?void 0:s.length)&&"block","min-height":"".concat(a,"px"),height:l,maxHeight:c})}(),N(t)}},N=function(t){if(t){var n=e.virtualEnabled?".".concat((0,r.resolveClassName)("virtual-section")):".".concat((0,r.resolveClassName)("table-body-content")),o=t.querySelector(".bk-table-body");p.value=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e){var o=e.querySelector(t);if(o)return o.offsetHeight>e.offsetHeight-n}return!1}(o,n,0)}};return{tableClass:y,headClass:g,contentClass:T,footerClass:_,wrapperStyle:w,contentStyle:P,headStyle:b,resetTableHeight:E,updateBorderClass:N,getColumnsWidthOffsetWidth:function(){var t=0;return p.value&&(t+=6),e.border.includes(n.OUTER)&&!e.border.includes(n.NONE)&&(t+=2),t},hasFooter:v,hasScrollY:p,hasScrollYRef:h}},Et=function(e,t){var n,o,r=(0,i.reactive)([]),a=wt(e,t).getColumns,s=function(e){if(/^\d+/.test("".concat(e.minWidth)))return e.minWidth;var t=A;return e.sort&&(t+=18),e.filter&&(t+=28),t},u=function(t){var n,o,i=(null==t?void 0:t.checked)||(null===(n=e.settings)||void 0===n?void 0:n.checked)||[],u=(null==t?void 0:t.fields)||(null===(o=e.settings)||void 0===o?void 0:o.fields)||[];r.length=0,r.push.apply(r,ee(a().map((function(e){var t;return Object.assign(Object.assign({},e),(l(t={calcWidth:null,resizeWidth:null,minWidth:s(e),listeners:new Map,isHidden:Xe(u,e,i)},O,(0,ue.v4)()),l(t,P,e),t))}))))};"object"===te(e.settings)&&u(e.settings);var c=function(e){var t,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="HeadColumnResize";!function(e){e.MOUSE_MOVE="onMousemove",e.MOUSE_OUT="onMouseout",e.MOUSE_DOWN="onMousedown"}(n||(n={}));var a=!1,s=!1,u=!1,c=0,d=null,f=0,p=(0,i.ref)(-1e3),v=function e(t){var n;s=!1,u=!1,document.body.style.cursor="";var o=t.clientX-c,r=(null!==(n=d.resizeWidth)&&void 0!==n?n:d.calcWidth)+o,i=Number(d.minWidth);d.resizeWidth=r>i?r:i,document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",y),c=0,p.value=-1e3,d=null,t.target.closest("table").querySelectorAll("th").forEach((function(e){return e.style.setProperty("user-select","inherit")}))},h=function(e){return(0,ye.throttle)((function(){var t,n=e.clientX-c,o=(null!==(t=d.resizeWidth)&&void 0!==t?t:d.calcWidth)+n;Number(d.minWidth)<o&&(p.value=e.clientX-c+f)}),60)},y=function(e){document.body.style.setProperty("cursor",""),h(e)()},g=(l(t={},n.MOUSE_DOWN,(function(e,t){if(a){s=!0,document.body.style.setProperty("cursor","col-resize"),d=t,c=e.clientX;var n=e.target.closest("table");f=c-n.getBoundingClientRect().left,document.addEventListener("mouseup",v),document.addEventListener("mousemove",y)}})),l(t,n.MOUSE_MOVE,(function(e,t){s&&!u&&(u=!0);var n=e.target.closest("th");if(u&&n.style.setProperty("user-select","none"),!u){if(!n)return;var o=n.getBoundingClientRect();o.width>12&&o.right-e.pageX<8?(a=!0,n.style.setProperty("cursor","col-resize")):(n.style.setProperty("cursor",""),a=!1)}})),l(t,n.MOUSE_OUT,(function(e,t){var n=e.target;u||n.style.setProperty("cursor","")})),t),m=function(e){return"".concat(r,"_").concat(e)},b=function(){e.forEach((function(e){!1!==e.resizable&&Object.keys(g).forEach((function(t){var n=m(t);e.listeners.has(n)||e.listeners.set(n,[]),e.listeners.get(n).push(g[t])}))}))},T=function(){e.forEach((function(e){Object.keys(g).forEach((function(t){var n=m(t);e.listeners.has(n)&&(e.listeners.get(n).length=0)}))}))};o&&b();var _=(0,i.computed)((function(){return{position:"absolute",top:0,bottom:0,left:0,width:"1px","background-color":"#ebeef5"}}));return{registerResizeEvent:b,resetResizeEvents:T,dragOffsetX:p,dragOffsetXStyle:_}}(r,!0),d=c.dragOffsetXStyle,f=c.dragOffsetX,p=c.resetResizeEvents,g=c.registerResizeEvent,m=function(e,t){var n=(0,i.reactive)([]),o=wt(e,t).getColumns;if("disabled"===e.columnPick)return{activeColumns:n};var r=(0,i.reactive)(Ot(e));return(0,i.watchEffect)((function(){n=o().map((function(e,t){return{index:t,active:r.some((function(e){return e===t})),_column:e}}));var t=Ot(e);n.forEach((function(e,n){Object.assign(e,{active:t.some((function(e){return e===n}))})}))})),{activeColumns:n}}(e,t).activeColumns;(0,i.watch)((function(){return[e.settings]}),(function(){var t;((null===(t=e.settings)||void 0===t?void 0:t.checked)||[]).length&&u()}));var x=(0,ye.debounce)((function(){u(),p(),g()}),120);(0,i.watch)((function(){return[e.columns,t]}),(function(){x()}),{immediate:!0,deep:!0});var N=e.columns.reduce((function(e,t,n){var o=ze(t,["field","type"],[t,n]),r=et(t.sort);return r?Object.assign(Object.assign({},e||{}),l({},o,null==r?void 0:r.value)):e}),null),S=(0,i.reactive)({rowActions:new Map,scrollTranslateY:0,scrollTranslateX:0,pos:{bottom:1},activeColumns:m,settings:e.settings,setting:{size:null===(n=e.settings)||void 0===n?void 0:n.size,height:E[null===(o=e.settings)||void 0===o?void 0:o.size]},defaultSort:N||e.defaultSort}),L=function(e){var t;return!!S.rowActions.has(e)&&(null===(t=S.rowActions.get(e))||void 0===t?void 0:t.isExpand)},k=function(){return S.rowActions.has(T)?S.rowActions.get(T):!!e.selectionKey&&z.every((function(e){return I(e)}))},R=function(e){var t=e.__$uuid,n=(S.rowActions.get(t)||{}).isSelected;return void 0!==n&&n},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=!1,n=!1;z.forEach((function(o){var r=e(o);t||r||(t=!0),!n&&r&&(n=!0)})),S.rowActions.set(_,n&&t),S.rowActions.set(T,n&&!t)},H=function(){e.columns.some((function(e){return"selection"===e.type}))&&V((function(e){return I(e)}))},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n="boolean"==typeof t?t:!k();S.rowActions.set(T,n),S.rowActions.set(_,!1),z.forEach((function(t,o){var r;if(tt(e,{row:t,index:o,isCheckAll:!1})){var i=t.__$uuid,l=Object.assign({},null!==(r=S.rowActions.get(i))&&void 0!==r?r:{},{isSelected:n});S.rowActions.set(i,l)}})),V(),K(n),q(null,t,!0)},I=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return R(e)};return"function"==typeof e.isSelectedFn?Reflect.apply(e.isSelectedFn,Pt,[{row:t,data:e.data}]):"string"==typeof e.selectionKey&&e.selectionKey.length?(0,ye.get)(t,e.selectionKey):n(t)},W=function(t,n,o){return I(t,(function(){var r,i=void 0===n?t.__$uuid:n;return!(!tt(e,{row:t,index:o,isCheckAll:!1})||!k())||!!S.rowActions.has(i)&&(null===(r=S.rowActions.get(i))||void 0===r?void 0:r.isSelected)}))},z=(0,i.reactive)([]),M=(0,i.computed)((function(){return r.some((function(e){return"function"==typeof e.rowspan||/^\d$/.test("".concat(e.rowspan))||"function"==typeof e.colspan||/^\d$/.test("".concat(e.colspan))}))})),D=(0,i.computed)((function(){return r.some((function(e){return"selection"===e.type}))})),F=(0,i.computed)((function(){return r.some((function(e){return"expand"===e.type}))})),U=(0,i.computed)((function(){return r.some((function(e){return"index"===e.type}))})),K=function(t){if(M.value||D.value||F.value||U.value){var n=null,o={};return z.forEach((function(r,i){var a=r.__$uuid;if(F.value&&Object.assign(r,l({},y,L(r.__$uuid))),M.value){var s=B(r,a,i,o,n);n=r.__$uuid,Object.assign(r,l({},w,s))}if(U.value&&Object.assign(r,l({},v,i)),D.value){var u=tt(e,{row:r,index:i,isCheckAll:!1});Object.assign(r,l({},b,function(e,t,n,o){var r=W(n,n.__$uuid,o);return e&&"boolean"==typeof t?t:r}(u,t,r,i)))}})),void(D.value&&"boolean"!=typeof t&&H())}},B=function(e,t,n,o,i){var a,s=0,u=null!==(a=o[i])&&void 0!==a?a:{};return o[t]||(o[t]={}),r.forEach((function(r,i){var a,c,d=Ze(r,i,e,n),f=d.colspan,p=d.rowspan,v=r.__col_$uuid,h=null!==(c=null===(a=u[v])||void 0===a?void 0:a.skipRowLen)&&void 0!==c?c:0,y=l({},v,{skipRowLen:0,skipRow:!1,skipCol:!1,skipColLen:0});s>0&&(y[v].skipColLen=s,y[v].skipCol=!0,s-=1),h>1?(y[v].skipRowLen=h-1,y[v].skipRow=!0):p>1&&(y[v].skipRowLen=p,y[v].skipRow=!1),f>1&&(y[v].skipColLen=f,s=f-1),Object.assign(o[t],Object.assign({},y))})),o[t]},G=(0,ye.debounce)(K,120);(0,i.watch)([M,D,F,U],(function(){G()}));var q=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.asyncData&&e.rowKey)if(o)e.data.forEach((function(t){(0,ye.has)(t,e.selectionKey)&&(0,ye.set)(t,e.selectionKey,!!n)}));else if((0,ye.has)(t,e.selectionKey)){var r=e.data.find((function(n){return(0,ye.get)(n,e.rowKey)===(0,ye.get)(t,e.rowKey)}));(0,ye.set)(r,e.selectionKey,!!n)}},$=Tt(0,r,!1),X=$.fixedColumns,Y=$.resolveColumnStyle,Z=$.resolveColumnClass,J=$.fixedWrapperClass;return{colgroups:r,dragOffsetXStyle:d,dragOffsetX:f,reactiveSchema:S,indexData:z,fixedWrapperClass:J,fixedColumns:X,resolveColumnStyle:Y,resolveColumnClass:Z,initIndexData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null,o={};if(M.value||D.value||F.value||U.value){var r=e.data.map((function(r,i){var a,s=$e(r,e,i);n=s;var u=Object.assign(Object.assign({},r),(l(a={},h,s),l(a,C,Object.assign({},r)),a));if(M.value){var c=B(r,s,i,o,n);Object.assign(u,l({},w,c))}return D.value&&Object.assign(u,l({},b,W(r,s,i))),U.value&&Object.assign(u,l({},v,i)),F.value&&Object.assign(u,l({},y,!!t&&L(s))),u}));return z.length=0,z.push.apply(z,ee(r)),void(D.value&&H())}z.length=0,z.push.apply(z,ee(e.data))},updateIndexData:K,setRowExpand:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=e.__$uuid,r="boolean"==typeof n?n:!L(o);S.rowActions.set(o,Object.assign({},null!==(t=S.rowActions.get(o))&&void 0!==t?t:{},{isExpand:r})),K()},updateColGroups:u,clearSelection:function(){j(!1)},toggleAllSelection:j,toggleRowSelection:function(e,t){var n,o=e.__$uuid;if(o){var r="boolean"==typeof t?t:!W(e,o),i=Object.assign({},null!==(n=S.rowActions.get(o))&&void 0!==n?n:{},{isSelected:r});S.rowActions.set(o,i),t||S.rowActions.set(T,!1),V(),K(),q(e,t,!1)}},getSelection:function(){return z.filter((function(e){return W(e)}))},clearSort:function(){Array.isArray(S.defaultSort)&&S.defaultSort.splice(0),S.defaultSort=N||e.defaultSort}}};const Nt=(0,i.defineComponent)({name:"Table",props:q,emits:p,setup:function(e,t){var n=(0,X.useLocale)("table"),o=null,u=null,c=null,d=(0,i.reactive)([]),f=wt(e,d).initColumns;(0,i.provide)(N,f);var p=(0,i.ref)(),v=(0,i.ref)(),h=(0,i.ref)(0),y=Et(e,d),g=y.colgroups,m=y.dragOffsetXStyle,b=y.dragOffsetX,T=y.reactiveSchema,_=y.indexData,C=y.fixedColumns,w=y.resolveColumnStyle,O=y.resolveColumnClass,P=y.setRowExpand,x=y.initIndexData,E=y.fixedWrapperClass,S=y.clearSelection,L=y.toggleAllSelection,k=y.toggleRowSelection,R=y.getSelection,V=y.clearSort,H=y.updateColGroups,j=oe(e,_),I=j.pageData,W=j.localPagination,z=j.resolvePageData,M=j.watchEffectFn,D=xt(e,d,p,T,I),F=D.tableClass,U=D.headClass,K=D.contentClass,B=D.footerClass,G=D.wrapperStyle,q=D.contentStyle,$=D.headStyle,Y=D.hasScrollYRef,J=D.updateBorderClass,Q=D.resetTableHeight,ee=D.getColumnsWidthOffsetWidth,ne=D.hasFooter,le=(0,i.computed)((function(){return{hasScrollY:Y.value}})),ae=new Ct(e,t,T,g,le,n),se=function(){var e=p.value.querySelector(".bk-table-body-content"),t=e.querySelector("table");if(t){var n=t.scrollWidth,o=e.clientWidth;h.value=n-o}};(0,i.watch)((function(){return[e.data,e.pagination,e.height,e.maxHeight,e.minHeight]}),(function(){x(e.reserveExpand),M(c,o,u),(0,i.nextTick)((function(){Q(p.value),J(p.value)}))}),{immediate:!0,deep:!0}),(0,i.watchEffect)((function(){if((null==p?void 0:p.value)instanceof HTMLElement){var e=ee();Ue(p.value,g,20,e),se()}})),ae.on(a.ON_SORT_BY_CLICK,(function(e){var n,r,l=e.sortFn,a=e.column,d=e.index,f=e.type;"function"==typeof l&&(z(c,o=l,u=a),null===(r=null===(n=v.value)||void 0===n?void 0:n.reset)||void 0===r||r.call(n)),t.emit(s.COLUMN_SORT,{column:(0,i.unref)(a.__col_source_data),index:d,type:f})})).on(a.ON_FILTER_CLICK,(function(e){var n,r,l=e.filterFn,a=e.checked,d=e.column,f=e.index;"function"==typeof l&&(z(c=l,o,u),null===(r=null===(n=v.value)||void 0===n?void 0:n.reset)||void 0===r||r.call(n)),t.emit(s.COLUMN_FILTER,{checked:a,column:(0,i.unref)(d.__col_source_data),index:f})})).on(a.ON_SETTING_CHANGE,(function(e){var n=e.checked,o=void 0===n?[]:n,r=e.size,l=e.height,a=e.fields;(0,i.nextTick)((function(){var e,n;H({checked:o,fields:a}),J(p.value);var i=ee();o.length&&Ue(p.value,g,A,i),null===(n=null===(e=v.value)||void 0===e?void 0:e.reset)||void 0===n||n.call(e),t.emit(s.SETTING_CHANGE,{checked:o,size:r,height:l,fields:a})}))})).on(a.ON_ROW_EXPAND_CLICK,(function(e){var n=e.row,o=e.column,r=e.index,i=e.rows,l=e.e;t.emit(s.ROW_EXPAND_CLICK,{row:ot(n),column:rt(o),index:r,rows:i,e:l}),P(n,!n.__row_expand)})).on(a.ON_ROW_CHECK,(function(n){var o=n.row,r=n.isAll,i=n.index,l=n.value;r?(L(l),t.emit(s.ROW_SELECT_ALL,{checked:l,data:e.data})):(k(o,l),t.emit(s.ROW_SELECT,{row:ot(o),index:i,checked:l,data:e.data})),t.emit(s.ROW_SELECT_CHANGE,{row:ot(o),isAll:r,index:i,checked:l,data:e.data})}));var ue=function(e){var n,o=null!==(n=T.pos.bottom)&&void 0!==n?n:0,i=e[1],l=i.translateX,a=i.translateY,u=i.pos,c=void 0===u?{}:u;T.scrollTranslateY=a,T.scrollTranslateX=l,T.pos=c;var d=c.bottom;d<=2&&o>d&&(0,r.debounce)(60,(function(){t.emit(s.SCROLL_BOTTOM,Object.assign(Object.assign({},c),{translateX:l,translateY:a}))}),!0)(),se()};(0,i.onMounted)((function(){if(e.observerResize){var t=Ke(p.value,(function(){if(p.value){"100%"!==e.height&&"auto"!==e.height||Q(p.value),J(p.value);var t=ee();Ue(p.value,g,20,t)}}),180,!0,e.resizerWay);t.start(),(0,i.onBeforeUnmount)((function(){t.disconnect(),t=null}))}})),(0,i.onBeforeUnmount)((function(){ae.destroy()})),t.expose({setRowExpand:P,clearSelection:S,toggleAllSelection:L,toggleRowSelection:k,getSelection:R,clearSort:V,scrollTo:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0};null===(t=null===(e=v.value)||void 0===e?void 0:e.scrollTo)||void 0===t||t.call(e,n)}});var ce=(0,i.computed)((function(){return Object.assign(Object.assign({},K),{"__is-empty":!I.length})})),de=(0,i.computed)((function(){var t;return l(t={},(0,r.resolveClassName)("table-body-content"),!0),l(t,"with-virtual-render",e.virtualEnabled),t})),fe={column_drag_line:!0,"offset-x":!0},pe=(0,i.computed)((function(){return Object.assign(Object.assign({},m.value),{left:"".concat(b.value-T.scrollTranslateX,"px")})})),ve={"scroll-loading":!0,_bottom:!0},he=(0,i.computed)((function(){var t;return l(t={},(0,r.resolveClassName)("fixed-bottom-border"),!0),l(t,"_is-empty",!e.data.length),t})),ye={zIndex:-1,width:0,height:0,display:"none"},ge=(0,i.computed)((function(){return{"--footer-height":ne.value?"".concat(e.paginationHeihgt,"px"):"0"}})),me=(0,i.computed)((function(){return Object.assign({right:Y.value?"".concat(6,"px"):0},ge.value)})),be=function(e,t){var n=(0,i.toRef)(e,"scrollLoading"),o=(0,i.computed)((function(){return null!==n.value&&("boolean"==typeof n.value&&n.value||"object"===te(n.value))}));return{renderScrollLoading:function(){var e,r,l;if(o.value){var a="boolean"==typeof n.value?{loading:!!n.value,inline:!0,title:"",size:re.BkLoadingSize.Normal,mode:re.BkLoadingMode.Default,indicator:null}:n.value,s=a.loading,u=a.size,c=a.mode,d=a.title,f=a.inline,p=a.indicator;return null!==(l=null===(r=(e=t.slots).fixedBottom)||void 0===r?void 0:r.call(e))&&void 0!==l?l:(0,i.createVNode)(ie(),{loading:s,size:u,mode:c,title:d,inline:f,indicator:p},null)}}}}(e,t).renderScrollLoading,Te=(0,i.computed)((function(){return e.virtualEnabled?{}:{scrollXName:"",scrollYName:""}}));return function(){var n,o;return(0,i.createVNode)("div",{class:F.value,style:G.value,ref:p},[(0,i.createVNode)("div",{class:U,style:$.value},[ae.renderTableHeadSchema()]),(0,i.createVNode)(Z(),(0,i.mergeProps)({ref:v,lineHeight:ae.getRowHeight,class:ce.value,style:q,list:I},Te.value,{contentClassName:de.value,onContentScroll:ue,throttleDelay:0,scrollEvent:!0,rowKey:e.rowKey,enabled:e.virtualEnabled}),{default:function(t){return ae.renderTableBodySchema(t.data||e.data)},afterSection:function(){return(0,i.createVNode)("div",{class:he.value},null)}}),(0,i.createVNode)("div",{class:E,style:me.value},[C.value.map((function(e){var t=e.isExist,n=e.colPos,o=e.column;return console.log("fixedWrapperClass"),t?"":(0,i.createVNode)("div",{class:O(o,T.scrollTranslateX,h.value),style:w(n)},null)})),(0,i.createVNode)("div",{class:fe,style:pe.value},null),(0,i.createVNode)("div",{class:ve},[be()])]),(0,i.createVNode)("div",{class:B.value,style:ge.value},[ne.value&&ae.renderTableFooter(W.value)]),(0,i.createVNode)("div",{style:ye},[null===(o=(n=t.slots).default)||void 0===o?void 0:o.call(n)])])}}}),St=(0,r.withInstall)(Nt);var Lt=(0,r.withInstall)($)})(),m})()));
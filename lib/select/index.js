!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../shared"),require("vue"),require("../icon"),require("lodash"),require("../config-provider"),require("../directives"),require("../input"),require("../loading"),require("../popover"),require("../virtual-render"),require("../tag"));else if("function"==typeof define&&define.amd)define(["../shared","vue","../icon","lodash","../config-provider","../directives","../input","../loading","../popover","../virtual-render","../tag"],t);else{var r="object"==typeof exports?t(require("../shared"),require("vue"),require("../icon"),require("lodash"),require("../config-provider"),require("../directives"),require("../input"),require("../loading"),require("../popover"),require("../virtual-render"),require("../tag")):t(e["../shared"],e.vue,e["../icon"],e.lodash,e["../config-provider"],e["../directives"],e["../input"],e["../loading"],e["../popover"],e["../virtual-render"],e["../tag"]);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(self,((e,t,r,o,n,l,a,i,u,s,c)=>(()=>{var d={7162:(e,t,r)=>{e.exports=r(5047)},5047:e=>{var t=function(e){"use strict";var t,r=Object.prototype,o=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var n=t&&t.prototype instanceof g?t:g,l=Object.create(n.prototype),a=new O(o||[]);return l._invoke=function(e,t,r){var o=d;return function(n,l){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===n)throw l;return L()}for(r.method=n,r.arg=l;;){var a=r.delegate;if(a){var i=C(a,r);if(i){if(i===h)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=c(e,t,r);if("normal"===u.type){if(o=r.done?f:v,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=f,r.method="throw",r.arg=u.arg)}}}(e,r,a),l}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d="suspendedStart",v="suspendedYield",p="executing",f="completed",h={};function g(){}function y(){}function m(){}var b={};u(b,l,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(I([])));T&&T!==r&&o.call(T,l)&&(b=T);var x=m.prototype=g.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,l,a,i){var u=c(e[n],e,l);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,i)}),(function(e){r("throw",e,a,i)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,i)}))}i(u.arg)}var n;this._invoke=function(e,o){function l(){return new t((function(t,n){r(e,o,t,n)}))}return n=n?n.then(l,l):l()}}function C(e,r){var o=e.iterator[r.method];if(o===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=c(o,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var l=n.arg;return l?l.done?(r[e.resultName]=l.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(e){if(e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:L}}function L(){return{value:t,done:!0}}return y.prototype=m,u(x,"constructor",m),u(m,"constructor",y),y.displayName=u(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,i,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},P(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,o,n,l){void 0===l&&(l=Promise);var a=new S(s(t,r,o,n),l);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(x),u(x,i,"Generator"),u(x,l,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var o=t.pop();if(o in e)return r.value=o,r.done=!1,r}return r.done=!0,r}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(V),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return i.type="throw",i.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var a=this.tryEntries[l],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var l=n;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var a=l?l.completion:{};return a.type=e,a.arg=t,l?(this.method="next",this.next=l.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),V(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;V(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:I(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},2717:e=>{"use strict";e.exports=n},4061:e=>{"use strict";e.exports=l},6870:e=>{"use strict";e.exports=r},8133:e=>{"use strict";e.exports=a},4870:e=>{"use strict";e.exports=i},5537:e=>{"use strict";e.exports=u},4212:t=>{"use strict";t.exports=e},7739:e=>{"use strict";e.exports=c},3511:e=>{"use strict";e.exports=s},467:e=>{"use strict";e.exports=o},748:e=>{"use strict";e.exports=t}},v={};function p(e){var t=v[e];if(void 0!==t)return t.exports;var r=v[e]={exports:{}};return d[e](r,r.exports,p),r.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var r in t)p.o(t,r)&&!p.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var f={};return(()=>{"use strict";p.r(f),p.d(f,{BkOption:()=>d,BkOptionGroup:()=>g,BkSelect:()=>A,default:()=>R});var e=p(4212);function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r=p(748),o=p(6870),n=p(7162),l=p.n(n);Object.create,Object.create;var a=Symbol("BkSelect"),i=Symbol("BkOptionGroup");function u(e){return{register:function(t,r){if(r){if(!e.value.has(t))return e.value.set(t,r);console.warn("repeat ".concat(t),r)}},unregister:function(t){e.value.delete(t)}}}function s(e,t){var o=this,n=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=e;return(0,r.customRef)((function(e,r){return{get:function(){return e(),n},set:function(e){clearTimeout(t),void 0===e||""===e?(n=e,r()):t=setTimeout((function(){n=e,r()}),o)}}}))}(""),a=(0,r.ref)(!1);return(0,r.watch)(n,(function(){return r=o,i=void 0,u=void 0,s=l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a.value=!0,r.next=4,e(n.value);case 4:a.value=!1,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:return r.prev=10,null==t||t(),r.finish(10);case 13:case"end":return r.stop()}}),r,null,[[0,7,10,13]])})),new(u||(u=Promise))((function(e,t){function o(e){try{l(s.next(e))}catch(e){t(e)}}function n(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof u?r:new u((function(e){e(r)}))).then(o,n)}l((s=s.apply(r,i||[])).next())}));var r,i,u,s})),{searchKey:n,searchLoading:a}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?String(e).trim().toLowerCase():e}const d=(0,r.defineComponent)({name:"Option",props:{value:e.PropTypes.any,label:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]).def(""),disabled:e.PropTypes.bool.def(!1)},setup:function(e){var t=(0,r.getCurrentInstance)().proxy,o=(0,r.reactive)({visible:!0}),n=(0,r.toRefs)(e),l=n.disabled,u=n.value,s=(0,r.inject)(a,null),c=(0,r.inject)(i,null),d=(0,r.computed)((function(){var e;return null===(e=null==s?void 0:s.selected)||void 0===e?void 0:e.some((function(e){return e.value===u.value}))})),v=(0,r.computed)((function(){return null==s?void 0:s.multiple})),p=(0,r.computed)((function(){return(null==s?void 0:s.activeOptionValue)===u.value})),f=(0,r.computed)((function(){return null==s?void 0:s.showSelectedIcon}));return(0,r.onBeforeMount)((function(){null==s||s.register(u.value,t),null==c||c.register(u.value,t)})),(0,r.onBeforeUnmount)((function(){null==s||s.unregister(u.value),null==c||c.unregister(u.value)})),Object.assign(Object.assign({},(0,r.toRefs)(o)),{selected:d,multiple:v,isHover:p,showSelectedIcon:f,handleOptionClick:function(){l.value||null==s||s.handleOptionSelected(t)},handleMouseEnter:function(){s.activeOptionValue=u.value}})},render:function(){var n,l,a,i=(0,e.classes)(t({"is-selected":this.selected,"is-disabled":this.disabled,"is-multiple":this.multiple,"is-hover":this.isHover},(0,e.resolveClassName)("select-option"),!0));return(0,r.withDirectives)((0,r.createVNode)("li",{class:i,onClick:this.handleOptionClick,onMouseenter:this.handleMouseEnter},[null!==(a=null===(l=(n=this.$slots).default)||void 0===l?void 0:l.call(n))&&void 0!==a?a:(0,r.createVNode)("span",{class:(0,e.resolveClassName)("select-option-item"),title:String(this.label)},[this.label]),this.multiple&&this.selected&&this.showSelectedIcon&&(0,r.createVNode)(o.Done,{class:(0,e.resolveClassName)("select-selected-icon"),width:22,height:22},null)]),[[r.vShow,this.visible]])}});function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const g=(0,r.defineComponent)({name:"OptionGroup",props:{label:e.PropTypes.string.def(""),disabled:e.PropTypes.bool.def(!1),collapsible:e.PropTypes.bool.def(!1),collapse:e.PropTypes.bool.def(!1)},setup:function(e,t){var o=t.emit,n=(0,r.getCurrentInstance)(),l=n.proxy,s=(0,r.inject)(a,null),c=(0,r.reactive)({groupCollapse:e.collapse,visible:!0}),d=(0,r.ref)(new Map),v=u(d),p=v.register,f=v.unregister,g=(0,r.computed)((function(){return"".concat(e.label," (").concat(h(d.value.values()).filter((function(e){return e.visible})).length,")")}));return(0,r.provide)(i,(0,r.reactive)(Object.assign(Object.assign({},(0,r.toRefs)(e)),{register:p,unregister:f,groupCollapse:(0,r.toRef)(c,"groupCollapse")}))),(0,r.onBeforeMount)((function(){null==s||s.registerGroup(n.uid,l)})),(0,r.onBeforeUnmount)((function(){null==s||s.unregisterGroup(n.uid)})),Object.assign(Object.assign({},(0,r.toRefs)(c)),{groupLabel:g,handleToggleCollapse:function(){e.collapsible&&!e.disabled&&(c.groupCollapse=!c.groupCollapse,o("update:collapse",c.groupCollapse))}})},render:function(){var n,l,a,i,u=(0,e.classes)((t(n={},(0,e.resolveClassName)("option-group"),!0),t(n,"collapsible",this.collapsible),t(n,"disabled",this.disabled),n)),s=(0,e.classes)((t(l={},(0,e.resolveClassName)("option-group-label"),!0),t(l,"collapsible",this.collapsible),l)),c=(0,e.classes)({"default-group-label-icon":!0,collapse:this.groupCollapse});return(0,r.withDirectives)((0,r.createVNode)("ul",{class:u},[(0,r.createVNode)("li",{class:s,onClick:this.handleToggleCollapse},[this.$slots.label?this.$slots.label():(0,r.createVNode)("span",{class:"default-group-label"},[this.collapsible&&(0,r.createVNode)(o.AngleUpFill,{class:c},null),(0,r.createVNode)("span",{class:"default-group-label-title"},[this.groupLabel])])]),(0,r.withDirectives)((0,r.createVNode)("ul",{class:(0,e.resolveClassName)("option-group-content")},[null===(i=(a=this.$slots).default)||void 0===i?void 0:i.call(a)]),[[r.vShow,!this.groupCollapse]])]),[[r.vShow,this.visible]])}});function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}var m=p(467),b=p(2717),w=p(4061),T=p(8133),x=p.n(T),P=p(4870),S=p.n(P),C=p(5537),N=p.n(C),V=p(3511),O=p.n(V),I=p(7739),L=p.n(I);const E=(0,r.defineComponent)({name:"SelectTagInput",props:{selected:{type:Array,default:function(){return[]}},tagTheme:(0,e.TagThemeType)(),placeholder:e.PropTypes.string.def(""),filterable:e.PropTypes.bool.def(!1),allowCreate:e.PropTypes.bool.def(!1),disabled:e.PropTypes.bool.def(!1),modelValue:e.PropTypes.any,collapseTags:e.PropTypes.bool.def(!1)},emits:["update:modelValue","remove","enter","keydown"],setup:function(e,t){var o=t.emit,n=(0,r.getCurrentInstance)().proxy,l=(0,r.inject)(a,null),i=(0,r.toRefs)(e),u=i.modelValue,s=i.collapseTags,c=i.selected,d=(0,r.ref)(u.value),v=(0,r.ref)(),p=(0,r.ref)(null);(0,r.watch)(u,(function(){d.value=u.value})),(0,r.watch)([c,s],(function(){f()}),{flush:"post"});var f=function(){s.value&&(p.value=null,setTimeout((function(){var e=function(e){var t=h(n.$el.querySelectorAll(".bk-tag"));return t}(),t=e.findIndex((function(t,r){return!!r&&e[r-1].offsetTop!==t.offsetTop}));p.value=t>0?t:null})))};return{select:l,overflowTagIndex:p,value:d,inputRef:v,handleRemoveTag:function(e){o("remove",e)},focus:function(){var e;null===(e=v.value)||void 0===e||e.focus()},handleInput:function(e){o("update:modelValue",e.target.value)},handleKeydown:function(e){"Enter"===e.code&&o("enter",e.target.value,e),o("keydown",e.target.value,e)}}},render:function(){var o,n,l,a,i,u,s,c,d=this,v=(0,e.classes)((t(o={},(0,e.resolveClassName)("select-tag"),!0),t(o,(0,e.resolveClassName)("select-tag--default"),!0),t(o,"is-disabled",this.disabled),t(o,"collapse-tag",this.collapseTags),o)),p=(0,e.classes)(t({},(0,e.resolveClassName)("select-tag-wrapper"),!0)),f={display:this.selected.length&&!this.filterable?"none":""};return(0,r.createVNode)("div",{class:v},[null===(l=null===(n=this.$slots)||void 0===n?void 0:n.prefix)||void 0===l?void 0:l.call(n),(0,r.createVNode)("span",{class:p},[null!==(u=null===(i=(a=this.$slots).default)||void 0===i?void 0:i.call(a))&&void 0!==u?u:this.selected.map((function(e,t){var o;return(0,r.createVNode)(L(),{closable:!0,theme:d.tagTheme,style:{display:d.collapseTags&&d.overflowTagIndex&&t>=d.overflowTagIndex?"none":""},onClose:function(){return d.handleRemoveTag(e.value)}},{default:function(){return[null===(o=d.select)||void 0===o?void 0:o.handleGetLabelByValue(e.value)]}})})),!!this.overflowTagIndex&&this.collapseTags&&(0,r.createVNode)(L(),{class:(0,e.resolveClassName)("select-overflow-tag")},{default:function(){return[(0,r.createTextVNode)("+"),d.selected.length-d.overflowTagIndex]}})]),(0,r.createVNode)("input",{class:(0,e.resolveClassName)("select-tag-input"),ref:"inputRef",type:"text",style:f,placeholder:this.selected.length?"":this.placeholder,readonly:!this.filterable,disabled:this.disabled,value:this.filterable?this.value:"",onInput:this.handleInput,onKeydown:this.handleKeydown},null),null===(c=null===(s=this.$slots)||void 0===s?void 0:s.suffix)||void 0===c?void 0:c.call(s)])}});function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}const k=(0,r.defineComponent)({name:"Select",directives:{clickoutside:w.clickoutside},props:{modelValue:e.PropTypes.any,multiple:e.PropTypes.bool.def(!1),disabled:e.PropTypes.bool.def(!1),size:e.PropTypes.size().def(e.SizeEnum.DEFAULT),clearable:e.PropTypes.bool.def(!0),loading:e.PropTypes.bool.def(!1),filterable:e.PropTypes.bool.def(!1),remoteMethod:e.PropTypes.func,scrollHeight:e.PropTypes.number.def(200),showSelectAll:e.PropTypes.bool.def(!1),popoverMinWidth:e.PropTypes.number.def(0),showOnInit:e.PropTypes.bool.def(!1),multipleMode:e.PropTypes.oneOf(["default","tag"]).def("default"),tagTheme:(0,e.TagThemeType)(),behavior:(0,e.InputBehaviorType)(),collapseTags:e.PropTypes.bool.def(!1),autoHeight:e.PropTypes.bool.def(!0),noDataText:e.PropTypes.string,noMatchText:e.PropTypes.string,loadingText:e.PropTypes.string,placeholder:e.PropTypes.string,searchPlaceholder:e.PropTypes.string,selectAllText:e.PropTypes.string,scrollLoading:e.PropTypes.bool.def(!1),allowCreate:e.PropTypes.bool.def(!1),popoverOptions:e.PropTypes.object.def({}),customContent:e.PropTypes.bool.def(!1),list:e.PropTypes.array.def([]),idKey:e.PropTypes.string.def("value"),displayKey:e.PropTypes.string.def("label"),withValidate:e.PropTypes.bool.def(!0),showSelectedIcon:e.PropTypes.bool.def(!0),inputSearch:e.PropTypes.bool.def(!0),enableVirtualRender:e.PropTypes.bool.def(!1),allowEmptyValues:e.PropTypes.array.def([]),autoFocus:e.PropTypes.bool.def(!1),keepSearchValue:e.PropTypes.bool.def(!1)},emits:["update:modelValue","change","toggle","clear","scroll-end","focus","blur"],setup:function(t,o){var n=o.emit,l=(0,b.useLocale)("select"),i=(0,r.toRefs)(t),d=i.modelValue,v=i.disabled,p=i.filterable,f=i.multiple,g=i.remoteMethod,w=i.loading,T=i.popoverMinWidth,x=i.showOnInit,P=i.multipleMode,S=i.allowCreate,C=i.customContent,N=i.showSelectedIcon,V=i.inputSearch,O=i.enableVirtualRender,I=i.showSelectAll,L=i.scrollHeight,E=i.list,k=i.displayKey,A=i.collapseTags,R=i.autoHeight,M=i.popoverOptions,H=i.allowEmptyValues,K=i.autoFocus,q=i.keepSearchValue,D=(0,r.computed)((function(){return void 0===t.noDataText?l.value.noData:t.noDataText})),G=(0,r.computed)((function(){return void 0===t.noMatchText?l.value.noMatchedData:t.noMatchText})),_=(0,r.computed)((function(){return void 0===t.loadingText?l.value.loading:t.loadingText})),$=(0,r.computed)((function(){return void 0===t.placeholder?l.value.pleaseSelect:t.placeholder})),B=(0,r.computed)((function(){return void 0===t.searchPlaceholder?l.value.enterKeywords:t.searchPlaceholder})),F=(0,r.computed)((function(){return void 0===t.selectAllText?l.value.all:t.selectAllText})),U=(0,e.useFormItem)(),z=(0,r.ref)(),W=(0,r.ref)(),Y=(0,r.ref)(),J=(0,r.ref)(),Q=(0,r.ref)(),X=(0,r.ref)(),Z=(0,r.ref)(),ee=(0,r.ref)(new Map),te=(0,r.computed)((function(){return h(ee.value.values())})),re=(0,r.ref)(new Map),oe=(0,r.ref)([]),ne=(0,r.computed)((function(){return oe.value.reduce((function(e,t){return e[t.value]=t.label,e}),{})})),le=(0,r.ref)();(0,r.watch)(d,(function(){var e;We(),t.withValidate&&(null===(e=null==U?void 0:U.validate)||void 0===e||e.call(U,"change"))}),{deep:!0}),(0,r.watch)(oe,(function(){var e;null===(e=Z.value)||void 0===e||e.updatePopover(null,be.value)}));var ae=(0,r.computed)((function(){return pe.value?E.value:E.value.filter((function(e){var t;return null===(t=c(String(e[k.value])))||void 0===t?void 0:t.includes(c(_e.value))}))})),ie=(0,r.computed)((function(){return v.value||w.value})),ue=(0,r.computed)((function(){return oe.value.map((function(e){var t,r;return(null===(r=null===(t=ee.value)||void 0===t?void 0:t.get(e.value))||void 0===r?void 0:r.label)||e.label}))})),se=(0,r.computed)((function(){var e=te.value.reduce((function(e,t){return t.disabled||e.push(t.value),e}),[]);return e.length<=oe.value.length&&e.every((function(e){return oe.value.some((function(t){return t.value===e}))}))})),ce=(0,r.computed)((function(){return!!re.value.size})),de=(0,r.computed)((function(){return!te.value.length})),ve=(0,r.computed)((function(){return te.value.length&&te.value.every((function(e){return!e.visible}))})),pe=(0,r.computed)((function(){return p.value&&"function"==typeof g.value})),fe=(0,r.computed)((function(){return!($e.value||de.value||ve.value)||C.value})),he=(0,r.computed)((function(){return f.value&&I.value&&(!_e.value||!p.value)})),ge=(0,r.computed)((function(){return L.value-12-(he.value?32:0)})),ye=(0,r.computed)((function(){return $e.value?_.value:de.value?D.value:ve.value?G.value:""})),me=(0,r.computed)((function(){return R.value?A.value&&!Re.value:A.value})),be=(0,r.computed)((function(){return(0,m.merge)({theme:"light bk-select-popover",trigger:"manual",width:Ae.value,arrow:!1,placement:"bottom-start",isShow:Re.value,reference:Q.value,offset:6,popoverDelay:0,renderType:e.RenderType.AUTO},M.value)})),we=u(ee),Te=we.register,xe=we.unregister,Pe=u(re),Se=Pe.register,Ce=Pe.unregister,Ne=function(){var e=(0,r.ref)(!1);return{isHover:e,setHover:function(){e.value=!0},cancelHover:function(){e.value=!1}}}(),Ve=Ne.isHover,Oe=Ne.setHover,Ie=Ne.cancelHover,Le=(0,r.ref)(!1),Ee=function(){Le.value||(Le.value=!0,n("focus"))},je=function(){Le.value&&(Le.value=!1,n("blur"))},ke=function(t,o){var n=t.popoverMinWidth,l=null,a=(0,r.ref)("auto"),i=(0,r.ref)(!1),u=function(){var e;a.value=Math.max(null===(e=o.value)||void 0===e?void 0:e.offsetWidth,n)};return(0,r.onMounted)((function(){o.value&&(l=(0,e.observerResize)(o.value,u,60,!0)).start()})),(0,r.onBeforeUnmount)((function(){null==l||l.stop(),l=null})),{isPopoverShow:i,popperWidth:a,togglePopover:function(){i.value=!i.value},hidePopover:function(){i.value=!1},showPopover:function(){i.value=!0}}}({popoverMinWidth:T.value},W),Ae=ke.popperWidth,Re=ke.isPopoverShow,Me=ke.hidePopover,He=ke.showPopover,Ke=ke.togglePopover;(0,r.watch)(Re,(function(){n("toggle",Re.value)}));var qe=(0,r.computed)((function(){return(p.value&&V.value||S.value)&&Re.value}));(0,r.watch)(Re,(function(e){e?setTimeout((function(){Ue(),De()}),10):q.value||(_e.value="")}));var De=function(){var e,t=oe.value[0],r=ee.value.get(null==t?void 0:t.value);r&&!r.disabled&&r.visible?le.value=null==t?void 0:t.value:le.value=null===(e=te.value.find((function(e){return!e.disabled&&e.visible})))||void 0===e?void 0:e.value},Ge=s(pe.value?g.value:function(e){p.value&&te.value.forEach((function(t){var r;t.visible=null===(r=c(String(t.label)))||void 0===r?void 0:r.includes(c(e))}))},De),_e=Ge.searchKey,$e=Ge.searchLoading,Be=function(e){e!==d.value&&(n("update:modelValue",e,d.value),n("change",e,d.value))},Fe=function(e){if(!ie.value&&e){if(f.value){var t=oe.value.findIndex((function(t){return t.value===e.value}));t>-1?oe.value.splice(t,1):oe.value.push({value:e.value,label:e.label||e.value}),Be(oe.value.map((function(e){return e.value})))}else oe.value=[{label:e.label||e.value,value:e.value}],Be(e.value),Me();Ue()}},Ue=function(){setTimeout((function(){var e,t,r;V.value||S.value?"tag"===P.value?null===(t=Q.value)||void 0===t||t.focus():null===(r=z.value)||void 0===r||r.focus():null===(e=J.value)||void 0===e||e.focus()}),0)},ze=function(e){var t,r,o=e;if("object"===y(o)){var n,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw l}}}}(ee.value.keys());try{for(l.s();!(n=l.n()).done;){var a=n.value;if((0,m.isEqual)(a,o)){o=a;break}}}catch(e){l.e(e)}finally{l.f()}}return(null===(r=null===(t=ee.value)||void 0===t?void 0:t.get(o))||void 0===r?void 0:r.label)||ne.value[o]||o},We=function(){Array.isArray(d.value)?oe.value=h(d.value.map((function(e){return{value:e,label:ze(e)}}))):void 0!==d.value||H.value.includes(d.value)?oe.value=[{value:d.value,label:ze(d.value)}]:oe.value=[]};return(0,r.provide)(a,(0,r.reactive)({multiple:f,selected:oe,activeOptionValue:le,showSelectedIcon:N,register:Te,unregister:xe,registerGroup:Se,unregisterGroup:Ce,handleOptionSelected:Fe,handleGetLabelByValue:ze})),(0,r.onMounted)((function(){We(),setTimeout((function(){x.value&&He(),K.value&&Ue()}))})),{selected:oe,isInput:qe,options:te,isDisabled:ie,selectedLabel:ue,isPopoverShow:Re,isHover:Ve,popperWidth:Ae,inputRef:z,triggerRef:W,contentRef:Y,searchRef:J,selectTagInputRef:Q,virtualRenderRef:X,popoverRef:Z,searchLoading:$e,isOptionsEmpty:de,isSearchEmpty:ve,isFocus:Le,isShowSelectContent:fe,curContentText:ye,isGroup:ce,searchKey:_e,isShowSelectAll:he,virtualHeight:ge,virtualList:ae,isCollapseTags:me,popoverConfig:be,focusInput:Ue,setHover:Oe,cancelHover:Ie,handleFocus:Ee,handleBlur:je,handleTogglePopover:function(){ie.value||(Ee(),Ke())},handleClear:function(e){e.stopPropagation(),oe.value=[],Be(f.value?[]:""),n("clear",f.value?[]:""),Me()},hidePopover:Me,showPopover:He,handleToggleAll:function(){se.value?oe.value=[]:te.value.forEach((function(e){e.disabled||oe.value.find((function(t){return t.value===e.value}))||oe.value.push({value:e.value,label:e.label||e.value})})),Be(oe.value.map((function(e){return e.value}))),Ue()},handleOptionSelected:Fe,handleClickOutside:function(e){var t,r=e.event.target;(null===(t=W.value)||void 0===t?void 0:t.contains(r))||W.value===r||(Me(),je())},handleScroll:function(e){var t=e.target;t.scrollTop+t.clientHeight===t.scrollHeight&&n("scroll-end")},handleDeleteTag:function(e){if(!ie.value){var t=oe.value.findIndex((function(t){return t.value===e}));t>-1&&(oe.value.splice(t,1),Be(oe.value.map((function(e){return e.value}))))}},handleInputChange:function(e){p.value&&(_e.value=e)},handleInputEnter:function(e,t){var r=String(e);!S.value||!r||p.value&&te.value.find((function(e){return c(String(e.label))===c(r)}))||ee.value.get(r)||(t.stopPropagation(),f.value?(oe.value.push({value:r,label:r}),Be(oe.value.map((function(e){return e.value})))):(oe.value=[{value:r,label:r}],Be(r),Me()),_e.value="")},handleKeydown:function(e){var t,r;if(Re.value){var o=te.value.filter((function(e){return!e.disabled&&e.visible})),n=o.findIndex((function(e){return e.value===le.value}));if(o.length&&-1!==n)switch(e.code){case"ArrowDown":e.preventDefault();var l=n>=o.length-1?0:n+1;le.value=null===(t=o[l])||void 0===t?void 0:t.value;break;case"ArrowUp":e.preventDefault();var a=0===n?o.length-1:n-1;le.value=null===(r=o[a])||void 0===r?void 0:r.value;break;case"Backspace":if(!f.value||!oe.value.length||_e.value.length||e.target===J.value)return;oe.value.pop(),Be(oe.value.map((function(e){return e.value})));break;case"Enter":var i=ee.value.get(le.value);Fe(i)}}},handleSelectedAllOptionMouseEnter:function(){le.value=""},handlePopoverShow:function(){setTimeout((function(){var e,t;O.value&&(null===(t=null===(e=X.value)||void 0===e?void 0:e.reset)||void 0===t||t.call(e))}))},localLoadingText:_,localPlaceholder:$,localSearchPlaceholder:B,localSelectAllText:F}},render:function(){var n,l=this,a=(0,e.classes)((t(n={},(0,e.resolveClassName)("select"),!0),t(n,"popover-show",this.isPopoverShow),t(n,"is-disabled",this.isDisabled),t(n,"is-focus",this.isFocus),t(n,"is-filterable",this.filterable),t(n,this.size,!0),t(n,this.behavior,!0),n)),i=function(){return l.loading?(0,r.createVNode)(S(),{loading:!0,theme:"primary",class:"spinner",mode:"spin",size:"mini"},null):l.clearable&&l.isHover&&l.selected.length&&!l.isDisabled?(0,r.createVNode)(o.Close,{class:"clear-icon",onClick:l.handleClear},null):(0,r.createVNode)(o.AngleUp,{class:"angle-up"},null)};return(0,r.createVNode)("div",{class:a},[(0,r.createVNode)(N(),(0,r.mergeProps)(this.popoverConfig,{onClickoutside:this.handleClickOutside,onAfterShow:this.handlePopoverShow,ref:"popoverRef"}),{default:function(){return(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-trigger"),style:{height:l.autoHeight&&l.collapseTags?"32px":""},ref:"triggerRef",onClick:l.handleTogglePopover,onMouseenter:l.setHover,onMouseleave:l.cancelHover},[(null===(o=(t=l.$slots).trigger)||void 0===o?void 0:o.call(t,{selected:l.selected}))||("tag"===l.multipleMode?(0,r.createVNode)(E,{ref:"selectTagInputRef",modelValue:l.searchKey,"onUpdate:modelValue":function(e){return l.searchKey=e},selected:l.selected,tagTheme:l.tagTheme,placeholder:l.localPlaceholder,filterable:l.isInput,disabled:l.isDisabled,onRemove:l.handleDeleteTag,collapseTags:l.isCollapseTags,onEnter:l.handleInputEnter,onKeydown:function(e,t){return l.handleKeydown(t)}},{prefix:function(){var e,t;return null===(t=(e=l.$slots).prefix)||void 0===t?void 0:t.call(e)},default:l.$slots.tag&&function(){return l.$slots.tag({selected:l.selected})},suffix:function(){return i()}}):(0,r.createVNode)(x(),{ref:"inputRef",type:"text",modelValue:l.isInput?l.searchKey:l.selectedLabel.join(","),placeholder:l.isInput&&l.selectedLabel.join(",")||l.localPlaceholder,readonly:!l.isInput,selectReadonly:!0,disabled:l.isDisabled,behavior:l.behavior,size:l.size,withValidate:!1,onInput:l.handleInputChange,onEnter:l.handleInputEnter,onKeydown:function(e,t){return l.handleKeydown(t)}},{prefix:function(){var e,t;return null===(t=(e=l.$slots).prefix)||void 0===t?void 0:t.call(e)},suffix:function(){return i()}}))]);var t,o},content:function(){return(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-content-wrapper"),ref:"contentRef"},[l.filterable&&!l.inputSearch&&(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-search-wrapper")},[(0,r.createVNode)(o.Search,{class:"icon-search",width:16,height:16},null),(0,r.withDirectives)((0,r.createVNode)("input",{ref:"searchRef",class:(0,e.resolveClassName)("select-search-input"),placeholder:l.localSearchPlaceholder,"onUpdate:modelValue":function(e){return l.searchKey=e}},null),[[r.vModelText,l.searchKey]])]),!l.isShowSelectContent&&(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-empty")},[l.searchLoading&&(0,r.createVNode)(S(),{class:"mr5",theme:"primary",loading:!0,mode:"spin",size:"mini"},null),(0,r.createVNode)("span",null,[l.curContentText])]),(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-content")},[(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-dropdown"),style:{maxHeight:"".concat(l.scrollHeight,"px")},onScroll:l.handleScroll},[(0,r.withDirectives)((0,r.createVNode)("ul",{class:(0,e.resolveClassName)("select-options")},[l.isShowSelectAll&&(0,r.createVNode)("li",{class:(0,e.resolveClassName)("select-option"),onMouseenter:l.handleSelectedAllOptionMouseEnter,onClick:l.handleToggleAll},[l.localSelectAllText]),l.enableVirtualRender?(0,r.createVNode)(O(),{list:l.virtualList,height:l.virtualHeight,lineHeight:32,ref:"virtualRenderRef"},{default:function(e){return e.data.map((function(e){return(0,r.createVNode)(d,{key:e[l.idKey],value:e[l.idKey],label:e[l.displayKey]},null)}))}}):l.list.map((function(e){return(0,r.createVNode)(d,{value:e[l.idKey],label:e[l.displayKey]},null)})),null===(n=(t=l.$slots).default)||void 0===n?void 0:n.call(t),l.scrollLoading&&(0,r.createVNode)("li",{class:(0,e.resolveClassName)("select-options-loading")},[(0,r.createVNode)(S(),{class:"spinner mr5",theme:"primary",loading:!0,mode:"spin",size:"mini"},null),(0,r.createVNode)("span",null,[l.localLoadingText])])]),[[r.vShow,l.isShowSelectContent]])]),l.$slots.extension&&(0,r.createVNode)("div",{class:(0,e.resolveClassName)("select-extension")},[l.$slots.extension()])])]);var t,n}})])}});var A=(0,e.withInstallProps)(k,{Option:d,Group:g});const R=A})(),f})()));